<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">

<properties>

	<entry key="loadRelationshipLevelValues">
	<![CDATA[
	SELECT * FROM DBO.RELATIONSHIP_LEVEL_DEFINITION WHERE RELATIONSHIP_BUILDER_SID = ?
	]]>
	</entry>
	
	<entry key="loadHierarchyAndRelationshipResults">
		<![CDATA[
			SELECT
				HD.HIERARCHY_NAME,
				A.LEVEL_NO AS HIGH_LEVEL,
				B.LEVEL_NO AS LOW_LEVEL,
				HD.CREATED_DATE,
				HD.MODIFIED_DATE,
				A.LEVEL_NAME,
				HD.VERSION_NO AS HIERARCHY_VERSION,
				HD.HIERARCHY_DEFINITION_SID,
				HT.DESCRIPTION AS HIERARCHY_CATEGORY,
				HELPER_TABLE.DESCRIPTION AS HIERARCHY_TYPE,
				HLD.LEVEL_NAME AS LEVEL_VALUE,
				HLD.HIERARCHY_LEVEL_DEFINITION_SID,
				HLD.LEVEL_NO,
				RB.RELATIONSHIP_BUILDER_SID,
				RB.RELATIONSHIP_NAME,
				RB.VERSION_NO
			FROM
				HIERARCHY_LEVEL_DEFINITION A,
				HIERARCHY_LEVEL_DEFINITION B,
				dbo.HIERARCHY_DEFINITION HD
			LEFT JOIN RELATIONSHIP_BUILDER RB ON
				RB.HIERARCHY_DEFINITION_SID = HD.HIERARCHY_DEFINITION_SID
				AND RB.HIERARCHY_VERSION = HD.VERSION_NO
			JOIN dbo.HIERARCHY_LEVEL_DEFINITION HLD ON
				HLD.HIERARCHY_DEFINITION_SID = HD.HIERARCHY_DEFINITION_SID
				AND HLD.VERSION_NO = HD.VERSION_NO
			JOIN dbo.HELPER_TABLE HT ON
				HD.HIERARCHY_CATEGORY = HT.HELPER_TABLE_SID
			JOIN dbo.HELPER_TABLE HELPER_TABLE ON
				HD.HIERARCHY_TYPE = HELPER_TABLE.HELPER_TABLE_SID
			WHERE
				A.HIERARCHY_DEFINITION_SID = B.HIERARCHY_DEFINITION_SID
				AND B.HIERARCHY_DEFINITION_SID = HD.HIERARCHY_DEFINITION_SID
				AND A.LEVEL_NO IN(
					SELECT
						MAX( H.LEVEL_NO )
					FROM
						dbo.HIERARCHY_LEVEL_DEFINITION H
					WHERE
						H.HIERARCHY_DEFINITION_SID = A.HIERARCHY_DEFINITION_SID
				)
				AND B.LEVEL_NO IN(
					SELECT
						MIN( H.LEVEL_NO )
					FROM
						dbo.HIERARCHY_LEVEL_DEFINITION H
					WHERE
						H.HIERARCHY_DEFINITION_SID = HD.HIERARCHY_DEFINITION_SID
				)
			ORDER BY
				HD.HIERARCHY_DEFINITION_SID,
				RB.RELATIONSHIP_BUILDER_SID,
				HLD.LEVEL_NO
		]]>
	</entry>

</properties>