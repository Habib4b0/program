# To change this license header, choose License Headers in Project Properties.
# To change this template file, choose Tools | Templates
# and open the template in the editor.

processSchedulerLoadingProcess= SELECT WP.PROCESS_SID, WP.PROCESS_NAME, WP.ACTIVE_FLAG AS STATUS, WP.START_DATE, WP.END_DATE,\
                          WP.FREQUENCY, WP.MANUAL_LAST_RUN, WP.MODIFIED_DATE, WP.MODIFIED_BY \
                          ,WP.PROCESS_DISPLAY_NAME ,WP.SCHEDULE_LAST_RUN, WP.PROCESS_TYPE, HTF.DESCRIPTION ,WP.SCRIPT_NAME FROM WORKFLOW_PROFILE WP \
                          LEFT JOIN HELPER_TABLE HTF ON HTF.HELPER_TABLE_SID = WP.PROCESS_TYPE 
processSchedulerLoadingProcessCount= SELECT count(*) FROM WORKFLOW_PROFILE WP \
                          LEFT JOIN HELPER_TABLE HTF ON HTF.HELPER_TABLE_SID = WP.PROCESS_TYPE

duplicateProcessName = select * from WORKFLOW_PROFILE WHERE PROCESS_NAME LIKE '?PROCESS_NAME'

duplicateProcessUpdate = select * from WORKFLOW_PROFILE WHERE PROCESS_NAME LIKE '?PROCESS_NAME' and PROCESS_SID <> '?PROCESS_SID'

workFlowQuery = SELECT WP.PROCESS_SID, WP.PROCESS_NAME, WP.ACTIVE_FLAG AS STATUS, WP.START_DATE, WP.END_DATE, SCM.CALENDAR_NAME, WP.FREQUENCY, WP.MANUAL_LAST_RUN, WP.MODIFIED_DATE, WP.MODIFIED_BY, WP.PROCESS_TYPE, PT.DESCRIPTION \
                FROM WORKFLOW_PROFILE WP \
                LEFT JOIN HELPER_TABLE HTF ON HTF.HELPER_TABLE_SID = WP.FREQUENCY \
                LEFT JOIN SLA_CALENDAR_MASTER SCM ON SCM.SLA_CALENDAR_MASTER_SID = WP.SLA_CALENDAR_MASTER_SID \
                LEFT JOIN HELPER_TABLE PT ON PT.HELPER_TABLE_SID = WP.PROCESS_TYPE \
                LEFT JOIN ?.dbo.User_ USR ON USR.userId = WP.MODIFIED_BY WHERE WP.MODIFIED_BY LIKE '%' 

GeteditCalendar=select HOLIDAY_MONTH, HOLIDAY_DAY, HOLIDAY_YEAR, HOLIDAY_COMBINED from SLA_CALENDAR_DETAILS where SLA_CALENDAR_MASTER_SID=?id 

holiday = select DEFAULT_HOLIDAYS from SLA_CALENDAR_MASTER where SLA_CALENDAR_MASTER_SID='?id'

getDeleteCvd = delete CCM from dbo.CUSTOM_CCP_MAP CCM \
               JOIN CUSTOM_VIEW_DETAILS CVD ON CVD.CUSTOM_VIEW_DETAILS_SID=CCM.CUSTOM_VIEW_DETAILS_SID \
                AND CVD.CUSTOM_VIEW_MASTER_SID IN(SELECT CUSTOM_VIEW_MASTER_SID \
                FROM CUSTOM_VIEW_MASTER cvm \
                JOIN @PROJECTION B \
                ON B.PROJECTION_MASTER_SID = cvm.PROJECTION_MASTER_SID);\
                delete CVD from dbo.CUSTOM_VIEW_DETAILS CVD where \
                CVD.CUSTOM_VIEW_MASTER_SID IN(SELECT CUSTOM_VIEW_MASTER_SID \
                FROM   CUSTOM_VIEW_MASTER cvm \
                JOIN @PROJECTION B \
                ON B.PROJECTION_MASTER_SID = cvm.PROJECTION_MASTER_SID); \

getDeleteCvdMandated = delete CVD from dbo.CUSTOM_VIEW_DETAILS CVD where \
                        CVD.CUSTOM_VIEW_MASTER_SID IN(SELECT CUSTOM_VIEW_MASTER_SID \
                        FROM   CUSTOM_VIEW_MASTER cvm \
                        JOIN @PROJECTION B \
                        ON B.PROJECTION_MASTER_SID = cvm.PROJECTION_MASTER_SID); \

getforecastDeleteDetailsQueryAccural = DELETE T FROM @TABLE_NAME T JOIN @PROJECTION A ON A.ACCRUAL_PROJ_DETAILS_SID = T.ACCRUAL_PROJ_DETAILS_SID; \

getforecastDeleteDetailsQueryReturns = DELETE T FROM @TABLE_NAME T JOIN @PROJECTION A ON A.RETURNS_DETAILS_SID = T.RETURNS_DETAILS_SID; \

getforecastDeleteDetailsQuery = DELETE T FROM @TABLE_NAME T JOIN @PROJECTION A ON A.PROJECTION_DETAILS_SID = T.PROJECTION_DETAILS_SID; \

getforecastDeleteProjectionQuery = DELETE A FROM @TABLE_NAME A JOIN (SELECT DISTINCT PROJECTION_MASTER_SID FROM @PROJECTION)B ON A.PROJECTION_MASTER_SID=B.PROJECTION_MASTER_SID; \

