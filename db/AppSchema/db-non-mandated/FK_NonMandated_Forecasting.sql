----------------------------------------------------- NM_SALES_PROJECTION_MASTER -----------------------------------------

-------------------------------- PROJECTION_DETAILS_SID REFERENCE FROM PROJECTION_DETAILS TABLE -------------------------------------
IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_SALES_PROJECTION_MASTER'
                     AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_NM_SALES_PROJECTION_MASTER_PROJECTION_DETAILS_PROJECTION_DETAILS_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE NM_SALES_PROJECTION_MASTER
        ADD CONSTRAINT FK_NM_SALES_PROJECTION_MASTER_PROJECTION_DETAILS_PROJECTION_DETAILS_SID FOREIGN KEY(PROJECTION_DETAILS_SID) REFERENCES PROJECTION_DETAILS(PROJECTION_DETAILS_SID)
  END 
GO

----------------------------------------------------- ST_NM_SALES_PROJECTION_MASTER -----------------------------------------

-------------------------------- PROJECTION_DETAILS_SID REFERENCE FROM PROJECTION_DETAILS TABLE -------------------------------------
IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_SALES_PROJECTION_MASTER'
                     AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_ST_NM_SALES_PROJECTION_MASTER_PROJECTION_DETAILS_PROJECTION_DETAILS_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE ST_NM_SALES_PROJECTION_MASTER
        ADD CONSTRAINT FK_ST_NM_SALES_PROJECTION_MASTER_PROJECTION_DETAILS_PROJECTION_DETAILS_SID FOREIGN KEY(PROJECTION_DETAILS_SID) REFERENCES PROJECTION_DETAILS(PROJECTION_DETAILS_SID)
  END 
GO

--------------------- NM_ACTUAL_SALES ------------------------------------------------------------------------------------------------

------------------------------------------------- PROJECTION_DETAILS_SID REFERENCE FROM PROJECTION_DETAILS TABLE ------------------------------------------------------
IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_ACTUAL_SALES'
                     AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_NM_ACTUAL_SALES_PROJECTION_DETAILS_PROJECTION_DETAILS_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE NM_ACTUAL_SALES
        ADD CONSTRAINT FK_NM_ACTUAL_SALES_PROJECTION_DETAILS_PROJECTION_DETAILS_SID FOREIGN KEY(PROJECTION_DETAILS_SID) REFERENCES PROJECTION_DETAILS(PROJECTION_DETAILS_SID)
  END
GO

------------------------------------------------- PERIOD_SID REFERENCE FROM PERIOD_SID --------------------------------------------------------------
IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_ACTUAL_SALES'
                     AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_NM_ACTUAL_SALES_PERIOD_PERIOD_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE NM_ACTUAL_SALES
        ADD CONSTRAINT FK_NM_ACTUAL_SALES_PERIOD_PERIOD_SID FOREIGN KEY(PERIOD_SID) REFERENCES PERIOD(PERIOD_SID)
  END
GO


------------------------------- ST_NM_ACTUAL_SALES -----------------------------------------------------------------------------

------------------------------------------------- PROJECTION_DETAILS_SID REFERENCE FROM PROJECTION_DETAILS TABLE ------------------------------------------------------                            
IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_ACTUAL_SALES'
                     AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_ST_NM_ACTUAL_SALES_PROJECTION_DETAILS_PROJECTION_DETAILS_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE ST_NM_ACTUAL_SALES
        ADD CONSTRAINT FK_ST_NM_ACTUAL_SALES_PROJECTION_DETAILS_PROJECTION_DETAILS_SID FOREIGN KEY(PROJECTION_DETAILS_SID) REFERENCES PROJECTION_DETAILS(PROJECTION_DETAILS_SID)
  END
GO

------------------------------------------------- PERIOD_SID REFERENCE FROM PERIOD_SID --------------------------------------------------------------
IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_ACTUAL_SALES'
                     AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_ST_NM_ACTUAL_SALES_PERIOD_PERIOD_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE ST_NM_ACTUAL_SALES
        ADD CONSTRAINT FK_ST_NM_ACTUAL_SALES_PERIOD_PERIOD_SID FOREIGN KEY(PERIOD_SID) REFERENCES PERIOD(PERIOD_SID)
  END
GO 


-------------------------------- NM SALES PROJECTION ----------------------------------

-------------------------------- PROJECTION_DETAILS_SID REFERENCE FROM PROJECTION_DETAILS TABLE -------------------------------------
IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_SALES_PROJECTION'
                     AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_NM_SALES_PROJECTION_PROJECTION_DETAILS_PROJECTION_DETAILS_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE NM_SALES_PROJECTION
        ADD CONSTRAINT FK_NM_SALES_PROJECTION_PROJECTION_DETAILS_PROJECTION_DETAILS_SID FOREIGN KEY(PROJECTION_DETAILS_SID) REFERENCES PROJECTION_DETAILS(PROJECTION_DETAILS_SID)
  END
GO

-------------------------------- PERIOD_SID REFERENCE FROM PERIOD TABLE -----------------------------------------------------------
IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_SALES_PROJECTION'
                     AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_NM_SALES_PROJECTION_PERIOD_PERIOD_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE NM_SALES_PROJECTION
        ADD CONSTRAINT FK_NM_SALES_PROJECTION_PERIOD_PERIOD_SID FOREIGN KEY(PERIOD_SID) REFERENCES PERIOD(PERIOD_SID)
  END
GO 

--------------------------------ST_NM_SALES_PROJECTION ----------------------------------

-------------------------------- PROJECTION_DETAILS_SID REFERENCE FROM PROJECTION_DETAILS TABLE -------------------------------------
IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_SALES_PROJECTION'
                     AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_ST_NM_SALES_PROJECTION_PROJECTION_DETAILS_PROJECTION_DETAILS_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE ST_NM_SALES_PROJECTION
        ADD CONSTRAINT FK_ST_NM_SALES_PROJECTION_PROJECTION_DETAILS_PROJECTION_DETAILS_SID FOREIGN KEY(PROJECTION_DETAILS_SID) REFERENCES PROJECTION_DETAILS(PROJECTION_DETAILS_SID)
  END
GO

-------------------------------- PERIOD_SID REFERENCE FROM PERIOD TABLE -----------------------------------------------------------
IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_SALES_PROJECTION'
                     AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_ST_NM_SALES_PROJECTION_PERIOD_PERIOD_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE ST_NM_SALES_PROJECTION
        ADD CONSTRAINT FK_ST_NM_SALES_PROJECTION_PERIOD_PERIOD_SID FOREIGN KEY(PERIOD_SID) REFERENCES PERIOD(PERIOD_SID)
  END
GO 


-------------------------------------------------- NM_DISCOUNT_PROJ_MASTER --------------------------------------------------------

----------------------------------------------------- PROJECTION_DETAILS_SID REFERENCE FROM PROJECTION_DETAILS TABLE -------------------------------
IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_DISCOUNT_PROJ_MASTER'
                     AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_NM_DISCOUNT_PROJ_MASTER_PROJECTION_DETAILS_PROJECTION_DETAILS_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE NM_DISCOUNT_PROJ_MASTER
        ADD CONSTRAINT FK_NM_DISCOUNT_PROJ_MASTER_PROJECTION_DETAILS_PROJECTION_DETAILS_SID FOREIGN KEY(PROJECTION_DETAILS_SID) REFERENCES PROJECTION_DETAILS(PROJECTION_DETAILS_SID)
  END
GO 

----------------------------------------------------- RS_MODEL_SID REFERENCE FROM RS_MODEL TABLE -------------------------------
IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_DISCOUNT_PROJ_MASTER'
                     AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_NM_DISCOUNT_PROJ_MASTER_RS_MODEL_RS_MODEL_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE NM_DISCOUNT_PROJ_MASTER
        ADD CONSTRAINT FK_NM_DISCOUNT_PROJ_MASTER_RS_MODEL_RS_MODEL_SID FOREIGN KEY(RS_MODEL_SID) REFERENCES RS_MODEL(RS_MODEL_SID)
  END
GO

----------------------------------------------------- RS_CONTRACT_SID REFERENCE FROM RS_CONTRACT TABLE -------------------------------

IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  Object_name(PARENT_OBJECT_ID) = 'NM_DISCOUNT_PROJ_MASTER'
                     AND Schema_name(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_NM_DISCOUNT_PROJ_MASTER_RS_CONTRACT_RS_CONTRACT_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE NM_DISCOUNT_PROJ_MASTER
        ADD CONSTRAINT FK_NM_DISCOUNT_PROJ_MASTER_RS_CONTRACT_RS_CONTRACT_SID FOREIGN KEY(RS_CONTRACT_SID) REFERENCES RS_CONTRACT(RS_CONTRACT_SID)
  END

GO

-------------------------------------------------- ST_NM_DISCOUNT_PROJ_MASTER --------------------------------------------------------

----------------------------------------------------- PROJECTION_DETAILS_SID REFERENCE FROM PROJECTION_DETAILS TABLE -------------------------------
IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_DISCOUNT_PROJ_MASTER'
                     AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_ST_NM_DISCOUNT_PROJ_MASTER_PROJECTION_DETAILS_PROJECTION_DETAILS_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE ST_NM_DISCOUNT_PROJ_MASTER
        ADD CONSTRAINT FK_ST_NM_DISCOUNT_PROJ_MASTER_PROJECTION_DETAILS_PROJECTION_DETAILS_SID FOREIGN KEY(PROJECTION_DETAILS_SID) REFERENCES PROJECTION_DETAILS(PROJECTION_DETAILS_SID)
  END
GO

----------------------------------------------------- RS_MODEL_SID REFERENCE FROM RS_MODEL TABLE -------------------------------
IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_DISCOUNT_PROJ_MASTER'
                     AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_ST_NM_DISCOUNT_PROJ_MASTER_RS_MODEL_RS_MODEL_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE ST_NM_DISCOUNT_PROJ_MASTER
        ADD CONSTRAINT FK_ST_NM_DISCOUNT_PROJ_MASTER_RS_MODEL_RS_MODEL_SID FOREIGN KEY(RS_MODEL_SID) REFERENCES RS_MODEL(RS_MODEL_SID)
  END
GO 

-------------------------------------------------- NM_ACTUAL_DISCOUNT --------------------------------------------------------

----------------------------------------------------- PROJECTION_DETAILS_SID REFERENCE FROM PROJECTION_DETAILS TABLE -------------------------------
IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_ACTUAL_DISCOUNT'
                     AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_NM_ACTUAL_DISCOUNT_PROJECTION_DETAILS_PROJECTION_DETAILS_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE NM_ACTUAL_DISCOUNT
        ADD CONSTRAINT FK_NM_ACTUAL_DISCOUNT_PROJECTION_DETAILS_PROJECTION_DETAILS_SID FOREIGN KEY(PROJECTION_DETAILS_SID) REFERENCES PROJECTION_DETAILS(PROJECTION_DETAILS_SID)
  END
GO

----------------------------------------------------- PERIOD_SID REFERENCE FROM PERIOD TABLE -------------------------------
IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_ACTUAL_DISCOUNT'
                     AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_NM_ACTUAL_DISCOUNT_PERIOD_PERIOD_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE NM_ACTUAL_DISCOUNT
        ADD CONSTRAINT FK_NM_ACTUAL_DISCOUNT_PERIOD_PERIOD_SID FOREIGN KEY(PERIOD_SID) REFERENCES PERIOD(PERIOD_SID)
  END
GO 

----------------------------------------------------- RS_MODEL_SID REFERENCE FROM RS_MODEL TABLE -------------------------------
IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_ACTUAL_DISCOUNT'
                     AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_NM_ACTUAL_DISCOUNT_RS_MODEL_RS_MODEL_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE NM_ACTUAL_DISCOUNT
        ADD CONSTRAINT FK_NM_ACTUAL_DISCOUNT_RS_MODEL_RS_MODEL_SID FOREIGN KEY(RS_MODEL_SID) REFERENCES RS_MODEL(RS_MODEL_SID)
  END
GO 

----------------------------------------------------- RS_CONTRACT_SID REFERENCE FROM RS_CONTRACT TABLE -------------------------------
IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  Object_name(PARENT_OBJECT_ID) = 'NM_ACTUAL_DISCOUNT'
                     AND Schema_name(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_NM_ACTUAL_DISCOUNT_RS_CONTRACT_RS_CONTRACT_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE NM_ACTUAL_DISCOUNT
        ADD CONSTRAINT FK_NM_ACTUAL_DISCOUNT_RS_CONTRACT_RS_CONTRACT_SID FOREIGN KEY(RS_CONTRACT_SID) REFERENCES RS_CONTRACT(RS_CONTRACT_SID)
  END

GO

-------------------------------------------------- ST_NM_ACTUAL_DISCOUNT --------------------------------------------------------

----------------------------------------------------- PROJECTION_DETAILS_SID REFERENCE FROM PROJECTION_DETAILS TABLE -------------------------------
IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_ACTUAL_DISCOUNT'
                     AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_ST_NM_ACTUAL_DISCOUNT_PROJECTION_DETAILS_PROJECTION_DETAILS_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE ST_NM_ACTUAL_DISCOUNT
        ADD CONSTRAINT FK_ST_NM_ACTUAL_DISCOUNT_PROJECTION_DETAILS_PROJECTION_DETAILS_SID FOREIGN KEY(PROJECTION_DETAILS_SID) REFERENCES PROJECTION_DETAILS(PROJECTION_DETAILS_SID)
  END
GO

----------------------------------------------------- PERIOD_SID REFERENCE FROM PERIOD TABLE -------------------------------
IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_ACTUAL_DISCOUNT'
                     AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_ST_NM_ACTUAL_DISCOUNT_PERIOD_PERIOD_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE ST_NM_ACTUAL_DISCOUNT
        ADD CONSTRAINT FK_ST_NM_ACTUAL_DISCOUNT_PERIOD_PERIOD_SID FOREIGN KEY(PERIOD_SID) REFERENCES PERIOD(PERIOD_SID)
  END
GO 

----------------------------------------------------- RS_MODEL_SID REFERENCE FROM RS_MODEL TABLE -------------------------------
IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_ACTUAL_DISCOUNT'
                     AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_ST_NM_ACTUAL_DISCOUNT_RS_MODEL_RS_MODEL_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE ST_NM_ACTUAL_DISCOUNT
        ADD CONSTRAINT FK_ST_NM_ACTUAL_DISCOUNT_RS_MODEL_RS_MODEL_SID FOREIGN KEY(RS_MODEL_SID) REFERENCES RS_MODEL(RS_MODEL_SID)
  END
GO 

----------------------------- NM_DISCOUNT_PROJECTION -----------------------------------------------------------

--------------------------------------- PROJECTION_DETAILS_SID REFERENCE FROM PROJECTION_DETAILS TABLE --------------------------------
IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_DISCOUNT_PROJECTION'
                     AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_NM_DISCOUNT_PROJECTION_PROJECTION_DETAILS_PROJECTION_DETAILS_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE NM_DISCOUNT_PROJECTION
        ADD CONSTRAINT FK_NM_DISCOUNT_PROJECTION_PROJECTION_DETAILS_PROJECTION_DETAILS_SID FOREIGN KEY(PROJECTION_DETAILS_SID) REFERENCES PROJECTION_DETAILS(PROJECTION_DETAILS_SID)
  END
GO

--------------------------------------- PERIOD_SID REFERENCE FROM PERIOD TABLE -----------------------------------------------------
IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_DISCOUNT_PROJECTION'
                     AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_NM_DISCOUNT_PROJECTION_PERIOD_PERIOD_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE NM_DISCOUNT_PROJECTION
        ADD CONSTRAINT FK_NM_DISCOUNT_PROJECTION_PERIOD_PERIOD_SID FOREIGN KEY(PERIOD_SID) REFERENCES PERIOD(PERIOD_SID)
  END
GO 

--------------------------------------- RS_MODEL_SID REFERENCE FROM RS_MODEL TABLE -----------------------------------------------------
IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_DISCOUNT_PROJECTION'
                     AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_NM_DISCOUNT_PROJECTION_RS_MODEL_RS_MODEL_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE NM_DISCOUNT_PROJECTION
        ADD CONSTRAINT FK_NM_DISCOUNT_PROJECTION_RS_MODEL_RS_MODEL_SID FOREIGN KEY(RS_MODEL_SID) REFERENCES RS_MODEL(RS_MODEL_SID)
  END
GO 

--------------------------------------- RS_CONTRACT_SID REFERENCE FROM RS_CONTRACT TABLE -----------------------------------------------------
IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  Object_name(PARENT_OBJECT_ID) = 'NM_DISCOUNT_PROJECTION'
                     AND Schema_name(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_NM_DISCOUNT_PROJECTION_RS_CONTRACT_RS_CONTRACT_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE NM_DISCOUNT_PROJECTION
        ADD CONSTRAINT FK_NM_DISCOUNT_PROJECTION_RS_CONTRACT_RS_CONTRACT_SID FOREIGN KEY(RS_CONTRACT_SID) REFERENCES RS_CONTRACT(RS_CONTRACT_SID)
  END

GO
----------------------------- ST_NM_DISCOUNT_PROJECTION -----------------------------------------------------------

--------------------------------------- PROJECTION_DETAILS_SID REFERENCE FROM PROJECTION_DETAILS TABLE --------------------------------
IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_DISCOUNT_PROJECTION'
                     AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_ST_NM_DISCOUNT_PROJECTION_PROJECTION_DETAILS_PROJECTION_DETAILS_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE ST_NM_DISCOUNT_PROJECTION
        ADD CONSTRAINT FK_ST_NM_DISCOUNT_PROJECTION_PROJECTION_DETAILS_PROJECTION_DETAILS_SID FOREIGN KEY(PROJECTION_DETAILS_SID) REFERENCES PROJECTION_DETAILS(PROJECTION_DETAILS_SID)
  END
GO

--------------------------------------- PERIOD_SID REFERENCE FROM PERIOD TABLE -----------------------------------------------------
IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_DISCOUNT_PROJECTION'
                     AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_ST_NM_DISCOUNT_PROJECTION_PERIOD_PERIOD_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE ST_NM_DISCOUNT_PROJECTION
        ADD CONSTRAINT FK_ST_NM_DISCOUNT_PROJECTION_PERIOD_PERIOD_SID FOREIGN KEY(PERIOD_SID) REFERENCES PERIOD(PERIOD_SID)
  END
GO 

--------------------------------------- RS_MODEL_SID REFERENCE FROM RS_MODEL TABLE -----------------------------------------------------
IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_DISCOUNT_PROJECTION'
                     AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_ST_NM_DISCOUNT_PROJECTION_RS_MODEL_RS_MODEL_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE ST_NM_DISCOUNT_PROJECTION
        ADD CONSTRAINT FK_ST_NM_DISCOUNT_PROJECTION_RS_MODEL_RS_MODEL_SID FOREIGN KEY(RS_MODEL_SID) REFERENCES RS_MODEL(RS_MODEL_SID)
  END
GO

----------------------------------------------------------- NM_PPA_PROJECTION_MASTER --------------------------------------------------

---------------------------------------------- PROJECTION_DETAILS_SID REFERENCE FROM PROJECTION_DETAILS TABLE ---------------------------------------

IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_PPA_PROJECTION_MASTER'
                     AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_NM_PPA_PROJECTION_MASTER_PROJECTION_DETAILS_PROJECTION_DETAILS_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE NM_PPA_PROJECTION_MASTER
        ADD CONSTRAINT FK_NM_PPA_PROJECTION_MASTER_PROJECTION_DETAILS_PROJECTION_DETAILS_SID FOREIGN KEY(PROJECTION_DETAILS_SID) REFERENCES PROJECTION_DETAILS(PROJECTION_DETAILS_SID)
  END
GO 

----------------------------------------------------------- ST_NM_PPA_PROJECTION_MASTER --------------------------------------------------

---------------------------------------------- PROJECTION_DETAILS_SID REFERENCE FROM PROJECTION_DETAILS TABLE ---------------------------------------
IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_PPA_PROJECTION_MASTER'
                     AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_ST_NM_PPA_PROJECTION_MASTER_PROJECTION_DETAILS_PROJECTION_DETAILS_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE ST_NM_PPA_PROJECTION_MASTER
        ADD CONSTRAINT FK_ST_NM_PPA_PROJECTION_MASTER_PROJECTION_DETAILS_PROJECTION_DETAILS_SID FOREIGN KEY(PROJECTION_DETAILS_SID) REFERENCES PROJECTION_DETAILS(PROJECTION_DETAILS_SID)
  END
GO 


------------------------------------------------- NM_ACTUAL_PPA --------------------------------------------------------------

---------------------------------------------- PROJECTION_DETAILS_SID REFERENCE FROM PROJECTION_DETAILS TABLE ---------------------------------------
IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_ACTUAL_PPA'
                     AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_NM_ACTUAL_PPA_PROJECTION_DETAILS_PROJECTION_DETAILS_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE NM_ACTUAL_PPA
        ADD CONSTRAINT FK_NM_ACTUAL_PPA_PROJECTION_DETAILS_PROJECTION_DETAILS_SID FOREIGN KEY(PROJECTION_DETAILS_SID) REFERENCES PROJECTION_DETAILS(PROJECTION_DETAILS_SID)
  END
GO

---------------------------------------------- PERIOD_SID REFERENCE FROM PERIOD TABLE ---------------------------------------
IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_ACTUAL_PPA'
                     AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_NM_ACTUAL_PPA_PERIOD_PERIOD_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE NM_ACTUAL_PPA
        ADD CONSTRAINT FK_NM_ACTUAL_PPA_PERIOD_PERIOD_SID FOREIGN KEY(PERIOD_SID) REFERENCES PERIOD(PERIOD_SID)
  END
GO

------------------------------------------------- ST_NM_ACTUAL_PPA --------------------------------------------------------------

---------------------------------------------- PROJECTION_DETAILS_SID REFERENCE FROM PROJECTION_DETAILS TABLE ---------------------------------------
IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_ACTUAL_PPA'
                     AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_ST_NM_ACTUAL_PPA_PROJECTION_DETAILS_PROJECTION_DETAILS_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE ST_NM_ACTUAL_PPA
        ADD CONSTRAINT FK_ST_NM_ACTUAL_PPA_PROJECTION_DETAILS_PROJECTION_DETAILS_SID FOREIGN KEY(PROJECTION_DETAILS_SID) REFERENCES PROJECTION_DETAILS(PROJECTION_DETAILS_SID)
  END
GO

---------------------------------------------- PERIOD_SID REFERENCE FROM PERIOD TABLE ---------------------------------------
IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_ACTUAL_PPA'
                     AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_ST_NM_ACTUAL_PPA_PERIOD_PERIOD_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE ST_NM_ACTUAL_PPA
        ADD CONSTRAINT FK_ST_NM_ACTUAL_PPA_PERIOD_PERIOD_SID FOREIGN KEY(PERIOD_SID) REFERENCES PERIOD(PERIOD_SID)
  END
GO


----------------------------------------------------------- NM_PPA_PROJECTION --------------------------------------------------

---------------------------------------------- PROJECTION_DETAILS_SID REFERENCE FROM PROJECTION_DETAILS TABLE ---------------------------------------
IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_PPA_PROJECTION'
                     AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_NM_PPA_PROJECTION_PROJECTION_DETAILS_PROJECTION_DETAILS_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE NM_PPA_PROJECTION
        ADD CONSTRAINT FK_NM_PPA_PROJECTION_PROJECTION_DETAILS_PROJECTION_DETAILS_SID FOREIGN KEY(PROJECTION_DETAILS_SID) REFERENCES PROJECTION_DETAILS(PROJECTION_DETAILS_SID)
  END
GO

---------------------------------------------- PERIOD_SID REFERENCE FROM PERIOD TABLE ---------------------------------------
IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_PPA_PROJECTION'
                     AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_NM_PPA_PROJECTION_PERIOD_PERIOD_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE NM_PPA_PROJECTION
        ADD CONSTRAINT FK_NM_PPA_PROJECTION_PERIOD_PERIOD_SID FOREIGN KEY(PERIOD_SID) REFERENCES PERIOD(PERIOD_SID)
  END
GO

----------------------------------------------------------- ST_NM_PPA_PROJECTION --------------------------------------------------

---------------------------------------------- PROJECTION_DETAILS_SID REFERENCE FROM PROJECTION_DETAILS TABLE --------------------------------------- 
IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_PPA_PROJECTION'
                     AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_ST_NM_PPA_PROJECTION_PROJECTION_DETAILS_PROJECTION_DETAILS_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE ST_NM_PPA_PROJECTION
        ADD CONSTRAINT FK_ST_NM_PPA_PROJECTION_PROJECTION_DETAILS_PROJECTION_DETAILS_SID FOREIGN KEY(PROJECTION_DETAILS_SID) REFERENCES PROJECTION_DETAILS(PROJECTION_DETAILS_SID)
  END
GO

---------------------------------------------- PERIOD_SID REFERENCE FROM PERIOD TABLE ---------------------------------------
IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_PPA_PROJECTION'
                     AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_ST_NM_PPA_PROJECTION_PERIOD_PERIOD_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE ST_NM_PPA_PROJECTION
        ADD CONSTRAINT FK_ST_NM_PPA_PROJECTION_PERIOD_PERIOD_SID FOREIGN KEY(PERIOD_SID) REFERENCES PERIOD(PERIOD_SID)
  END
GO

 ----------------------------------------------------- NM_ASSUMPTIONS -------------------------------------

------------------------------------------------------ PROJECTION_DETAILS_SID REFERENCE FROM PROJECTION_DETAILS ------------------------------
IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_ASSUMPTIONS'
                     AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_NM_ASSUMPTIONS_PROJECTION_DETAILS_PROJECTION_DETAILS_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE NM_ASSUMPTIONS
        ADD CONSTRAINT FK_NM_ASSUMPTIONS_PROJECTION_DETAILS_PROJECTION_DETAILS_SID FOREIGN KEY(PROJECTION_DETAILS_SID) REFERENCES PROJECTION_DETAILS(PROJECTION_DETAILS_SID)
  END 
GO

----------------------------------------------------- ST_NM_ASSUMPTIONS -------------------------------------

------------------------------------------------------ PROJECTION_DETAILS_SID REFERENCE FROM PROJECTION_DETAILS ------------------------------
IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_ASSUMPTIONS'
                     AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_ST_NM_ASSUMPTIONS_PROJECTION_DETAILS_PROJECTION_DETAILS_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE ST_NM_ASSUMPTIONS
        ADD CONSTRAINT FK_ST_NM_ASSUMPTIONS_PROJECTION_DETAILS_PROJECTION_DETAILS_SID FOREIGN KEY(PROJECTION_DETAILS_SID) REFERENCES PROJECTION_DETAILS(PROJECTION_DETAILS_SID)
  END
GO
----------------------------------------------PPA FKS-------------------------------
----------------------------------------ST_NM_PPA_PROJECTION--------------------------------------------------------------------
IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_PPA_PROJECTION_HELPER_TABLE_BASE_PRICE_TYPE'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_PPA_PROJECTION ADD CONSTRAINT FK_ST_NM_PPA_PROJECTION_HELPER_TABLE_BASE_PRICE_TYPE FOREIGN KEY (BASE_PRICE_TYPE) REFERENCES HELPER_TABLE (HELPER_TABLE_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_PPA_PROJECTION_HELPER_TABLE_NET_BASE_PRICE'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_PPA_PROJECTION ADD CONSTRAINT FK_ST_NM_PPA_PROJECTION_HELPER_TABLE_NET_BASE_PRICE FOREIGN KEY (NET_BASE_PRICE) REFERENCES HELPER_TABLE (HELPER_TABLE_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_PPA_PROJECTION_HELPER_TABLE_NET_PRICE_TYPE'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_PPA_PROJECTION ADD CONSTRAINT FK_ST_NM_PPA_PROJECTION_HELPER_TABLE_NET_PRICE_TYPE FOREIGN KEY (NET_PRICE_TYPE) REFERENCES HELPER_TABLE (HELPER_TABLE_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_PPA_PROJECTION_HELPER_TABLE_NET_RESET_PRICE_TYPE'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_PPA_PROJECTION ADD CONSTRAINT FK_ST_NM_PPA_PROJECTION_HELPER_TABLE_NET_RESET_PRICE_TYPE FOREIGN KEY (NET_RESET_PRICE_TYPE) REFERENCES HELPER_TABLE (HELPER_TABLE_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_PPA_PROJECTION_HELPER_TABLE_NET_SUBSEQUENT_PERIOD_PRICE'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_PPA_PROJECTION ADD CONSTRAINT FK_ST_NM_PPA_PROJECTION_HELPER_TABLE_NET_SUBSEQUENT_PERIOD_PRICE FOREIGN KEY (NET_SUBSEQUENT_PERIOD_PRICE) REFERENCES HELPER_TABLE (HELPER_TABLE_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_PPA_PROJECTION_HELPER_TABLE_PRICE_TOLERANCE_FREQUENCY'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_PPA_PROJECTION ADD CONSTRAINT FK_ST_NM_PPA_PROJECTION_HELPER_TABLE_PRICE_TOLERANCE_FREQUENCY FOREIGN KEY (PRICE_TOLERANCE_FREQUENCY) REFERENCES HELPER_TABLE (HELPER_TABLE_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_PPA_PROJECTION_HELPER_TABLE_PRICE_TOLERANCE_INTERVAL'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_PPA_PROJECTION ADD CONSTRAINT FK_ST_NM_PPA_PROJECTION_HELPER_TABLE_PRICE_TOLERANCE_INTERVAL FOREIGN KEY (PRICE_TOLERANCE_INTERVAL) REFERENCES HELPER_TABLE (HELPER_TABLE_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_PPA_PROJECTION_HELPER_TABLE_PRICE_TOLERANCE_TYPE'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_PPA_PROJECTION ADD CONSTRAINT FK_ST_NM_PPA_PROJECTION_HELPER_TABLE_PRICE_TOLERANCE_TYPE FOREIGN KEY (PRICE_TOLERANCE_TYPE) REFERENCES HELPER_TABLE (HELPER_TABLE_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_PPA_PROJECTION_HELPER_TABLE_RESET_ELIGIBLE'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_PPA_PROJECTION ADD CONSTRAINT FK_ST_NM_PPA_PROJECTION_HELPER_TABLE_RESET_ELIGIBLE FOREIGN KEY (RESET_ELIGIBLE) REFERENCES HELPER_TABLE (HELPER_TABLE_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_PPA_PROJECTION_HELPER_TABLE_RESET_FREQUENCY'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_PPA_PROJECTION ADD CONSTRAINT FK_ST_NM_PPA_PROJECTION_HELPER_TABLE_RESET_FREQUENCY FOREIGN KEY (RESET_FREQUENCY) REFERENCES HELPER_TABLE (HELPER_TABLE_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_PPA_PROJECTION_HELPER_TABLE_RESET_INTERVAL'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_PPA_PROJECTION ADD CONSTRAINT FK_ST_NM_PPA_PROJECTION_HELPER_TABLE_RESET_INTERVAL FOREIGN KEY (RESET_INTERVAL) REFERENCES HELPER_TABLE (HELPER_TABLE_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_PPA_PROJECTION_ITEM_PRICING_QUALIFIER_BASE_PRICE_PRICE_TYPE'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_PPA_PROJECTION ADD CONSTRAINT FK_ST_NM_PPA_PROJECTION_ITEM_PRICING_QUALIFIER_BASE_PRICE_PRICE_TYPE FOREIGN KEY (BASE_PRICE_PRICE_TYPE) REFERENCES ITEM_PRICING_QUALIFIER (ITEM_PRICING_QUALIFIER_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_PPA_PROJECTION_ITEM_PRICING_QUALIFIER_ITEM_PRICING_QUALIFIER_SID'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_PPA_PROJECTION ADD CONSTRAINT FK_ST_NM_PPA_PROJECTION_ITEM_PRICING_QUALIFIER_ITEM_PRICING_QUALIFIER_SID FOREIGN KEY (ITEM_PRICING_QUALIFIER_SID) REFERENCES ITEM_PRICING_QUALIFIER (ITEM_PRICING_QUALIFIER_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_PPA_PROJECTION_ITEM_PRICING_QUALIFIER_RESET_PRICE_TYPE'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_PPA_PROJECTION ADD CONSTRAINT FK_ST_NM_PPA_PROJECTION_ITEM_PRICING_QUALIFIER_RESET_PRICE_TYPE FOREIGN KEY (RESET_PRICE_TYPE) REFERENCES ITEM_PRICING_QUALIFIER (ITEM_PRICING_QUALIFIER_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_PPA_PROJECTION_ITEM_PRICING_QUALIFIER_SUBSEQUENT_PERIOD_PRICE_TYPE'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_PPA_PROJECTION ADD CONSTRAINT FK_ST_NM_PPA_PROJECTION_ITEM_PRICING_QUALIFIER_SUBSEQUENT_PERIOD_PRICE_TYPE FOREIGN KEY (SUBSEQUENT_PERIOD_PRICE_TYPE) REFERENCES ITEM_PRICING_QUALIFIER (ITEM_PRICING_QUALIFIER_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_PPA_PROJECTION_PERIOD_PERIOD_SID'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_PPA_PROJECTION ADD CONSTRAINT FK_ST_NM_PPA_PROJECTION_PERIOD_PERIOD_SID FOREIGN KEY (PERIOD_SID) REFERENCES PERIOD (PERIOD_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_PPA_PROJECTION_PROJECTION_DETAILS_PROJECTION_DETAILS_SID'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_PPA_PROJECTION ADD CONSTRAINT FK_ST_NM_PPA_PROJECTION_PROJECTION_DETAILS_PROJECTION_DETAILS_SID FOREIGN KEY (PROJECTION_DETAILS_SID) REFERENCES PROJECTION_DETAILS (PROJECTION_DETAILS_SID)
END
	GO

IF EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_PPA_PROJECTION_FORECASTING_FORMULA_NET_BASE_PRICE_FORMULA'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_PPA_PROJECTION

	DROP CONSTRAINT FK_ST_NM_PPA_PROJECTION_FORECASTING_FORMULA_NET_BASE_PRICE_FORMULA
END
GO

IF EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_PPA_PROJECTION_FORECASTING_FORMULA_NET_SUBSEQUENT_PERIOD_PRICE_FORMULA'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_PPA_PROJECTION

	DROP CONSTRAINT FK_ST_NM_PPA_PROJECTION_FORECASTING_FORMULA_NET_SUBSEQUENT_PERIOD_PRICE_FORMULA
END
GO

IF EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_PPA_PROJECTION_FORECASTING_FORMULA_NET_PRICE_TYPE_FORMULA'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_PPA_PROJECTION

	DROP CONSTRAINT FK_ST_NM_PPA_PROJECTION_FORECASTING_FORMULA_NET_PRICE_TYPE_FORMULA
END
GO

IF EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_PPA_PROJECTION_FORECASTING_FORMULA_NET_RESET_PRICE_FORMULA'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_PPA_PROJECTION

	DROP CONSTRAINT FK_ST_NM_PPA_PROJECTION_FORECASTING_FORMULA_NET_RESET_PRICE_FORMULA
END
GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_PPA_PROJECTION_NET_SALES_FORMULA_MASTER_NET_BASE_PRICE_FORMULA'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_PPA_PROJECTION ADD CONSTRAINT FK_ST_NM_PPA_PROJECTION_NET_SALES_FORMULA_MASTER_NET_BASE_PRICE_FORMULA FOREIGN KEY (NET_BASE_PRICE_FORMULA) REFERENCES NET_SALES_FORMULA_MASTER (NET_SALES_FORMULA_MASTER_SID)
END
GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_PPA_PROJECTION_NET_SALES_FORMULA_MASTER_NET_SUBSEQUENT_PERIOD_PRICE_FORMULA'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_PPA_PROJECTION ADD CONSTRAINT FK_ST_NM_PPA_PROJECTION_NET_SALES_FORMULA_MASTER_NET_SUBSEQUENT_PERIOD_PRICE_FORMULA FOREIGN KEY (NET_SUBSEQUENT_PERIOD_PRICE_FORMULA) REFERENCES NET_SALES_FORMULA_MASTER (NET_SALES_FORMULA_MASTER_SID)
END
GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_PPA_PROJECTION_NET_SALES_FORMULA_MASTER_NET_PRICE_TYPE_FORMULA'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_PPA_PROJECTION ADD CONSTRAINT FK_ST_NM_PPA_PROJECTION_NET_SALES_FORMULA_MASTER_NET_PRICE_TYPE_FORMULA FOREIGN KEY (NET_PRICE_TYPE_FORMULA) REFERENCES NET_SALES_FORMULA_MASTER (NET_SALES_FORMULA_MASTER_SID)
END
GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_PPA_PROJECTION_NET_SALES_FORMULA_MASTER_NET_RESET_PRICE_FORMULA'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_PPA_PROJECTION ADD CONSTRAINT FK_ST_NM_PPA_PROJECTION_NET_SALES_FORMULA_MASTER_NET_RESET_PRICE_FORMULA FOREIGN KEY (NET_RESET_PRICE_FORMULA) REFERENCES NET_SALES_FORMULA_MASTER (NET_SALES_FORMULA_MASTER_SID)
END
GO

----------------------------------------------NM_PPA_PROJECTION-----------------------------------------------------------
IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_PPA_PROJECTION_HELPER_TABLE_BASE_PRICE_TYPE'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_PPA_PROJECTION ADD CONSTRAINT FK_NM_PPA_PROJECTION_HELPER_TABLE_BASE_PRICE_TYPE FOREIGN KEY (BASE_PRICE_TYPE) REFERENCES HELPER_TABLE (HELPER_TABLE_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_PPA_PROJECTION_HELPER_TABLE_NET_BASE_PRICE'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_PPA_PROJECTION ADD CONSTRAINT FK_NM_PPA_PROJECTION_HELPER_TABLE_NET_BASE_PRICE FOREIGN KEY (NET_BASE_PRICE) REFERENCES HELPER_TABLE (HELPER_TABLE_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_PPA_PROJECTION_HELPER_TABLE_NET_PRICE_TYPE'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_PPA_PROJECTION ADD CONSTRAINT FK_NM_PPA_PROJECTION_HELPER_TABLE_NET_PRICE_TYPE FOREIGN KEY (NET_PRICE_TYPE) REFERENCES HELPER_TABLE (HELPER_TABLE_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_PPA_PROJECTION_HELPER_TABLE_NET_RESET_PRICE_TYPE'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_PPA_PROJECTION ADD CONSTRAINT FK_NM_PPA_PROJECTION_HELPER_TABLE_NET_RESET_PRICE_TYPE FOREIGN KEY (NET_RESET_PRICE_TYPE) REFERENCES HELPER_TABLE (HELPER_TABLE_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_PPA_PROJECTION_HELPER_TABLE_NET_SUBSEQUENT_PERIOD_PRICE'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_PPA_PROJECTION ADD CONSTRAINT FK_NM_PPA_PROJECTION_HELPER_TABLE_NET_SUBSEQUENT_PERIOD_PRICE FOREIGN KEY (NET_SUBSEQUENT_PERIOD_PRICE) REFERENCES HELPER_TABLE (HELPER_TABLE_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_PPA_PROJECTION_HELPER_TABLE_PRICE_TOLERANCE_FREQUENCY'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_PPA_PROJECTION ADD CONSTRAINT FK_NM_PPA_PROJECTION_HELPER_TABLE_PRICE_TOLERANCE_FREQUENCY FOREIGN KEY (PRICE_TOLERANCE_FREQUENCY) REFERENCES HELPER_TABLE (HELPER_TABLE_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_PPA_PROJECTION_HELPER_TABLE_PRICE_TOLERANCE_INTERVAL'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_PPA_PROJECTION ADD CONSTRAINT FK_NM_PPA_PROJECTION_HELPER_TABLE_PRICE_TOLERANCE_INTERVAL FOREIGN KEY (PRICE_TOLERANCE_INTERVAL) REFERENCES HELPER_TABLE (HELPER_TABLE_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_PPA_PROJECTION_HELPER_TABLE_PRICE_TOLERANCE_TYPE'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_PPA_PROJECTION ADD CONSTRAINT FK_NM_PPA_PROJECTION_HELPER_TABLE_PRICE_TOLERANCE_TYPE FOREIGN KEY (PRICE_TOLERANCE_TYPE) REFERENCES HELPER_TABLE (HELPER_TABLE_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_PPA_PROJECTION_HELPER_TABLE_RESET_ELIGIBLE'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_PPA_PROJECTION ADD CONSTRAINT FK_NM_PPA_PROJECTION_HELPER_TABLE_RESET_ELIGIBLE FOREIGN KEY (RESET_ELIGIBLE) REFERENCES HELPER_TABLE (HELPER_TABLE_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_PPA_PROJECTION_HELPER_TABLE_RESET_FREQUENCY'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_PPA_PROJECTION ADD CONSTRAINT FK_NM_PPA_PROJECTION_HELPER_TABLE_RESET_FREQUENCY FOREIGN KEY (RESET_FREQUENCY) REFERENCES HELPER_TABLE (HELPER_TABLE_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_PPA_PROJECTION_HELPER_TABLE_RESET_INTERVAL'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_PPA_PROJECTION ADD CONSTRAINT FK_NM_PPA_PROJECTION_HELPER_TABLE_RESET_INTERVAL FOREIGN KEY (RESET_INTERVAL) REFERENCES HELPER_TABLE (HELPER_TABLE_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_PPA_PROJECTION_ITEM_PRICING_QUALIFIER_BASE_PRICE_PRICE_TYPE'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_PPA_PROJECTION ADD CONSTRAINT FK_NM_PPA_PROJECTION_ITEM_PRICING_QUALIFIER_BASE_PRICE_PRICE_TYPE FOREIGN KEY (BASE_PRICE_PRICE_TYPE) REFERENCES ITEM_PRICING_QUALIFIER (ITEM_PRICING_QUALIFIER_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_PPA_PROJECTION_ITEM_PRICING_QUALIFIER_ITEM_PRICING_QUALIFIER_SID'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_PPA_PROJECTION ADD CONSTRAINT FK_NM_PPA_PROJECTION_ITEM_PRICING_QUALIFIER_ITEM_PRICING_QUALIFIER_SID FOREIGN KEY (ITEM_PRICING_QUALIFIER_SID) REFERENCES ITEM_PRICING_QUALIFIER (ITEM_PRICING_QUALIFIER_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_PPA_PROJECTION_ITEM_PRICING_QUALIFIER_RESET_PRICE_TYPE'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_PPA_PROJECTION ADD CONSTRAINT FK_NM_PPA_PROJECTION_ITEM_PRICING_QUALIFIER_RESET_PRICE_TYPE FOREIGN KEY (RESET_PRICE_TYPE) REFERENCES ITEM_PRICING_QUALIFIER (ITEM_PRICING_QUALIFIER_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_PPA_PROJECTION_ITEM_PRICING_QUALIFIER_SUBSEQUENT_PERIOD_PRICE_TYPE'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_PPA_PROJECTION ADD CONSTRAINT FK_NM_PPA_PROJECTION_ITEM_PRICING_QUALIFIER_SUBSEQUENT_PERIOD_PRICE_TYPE FOREIGN KEY (SUBSEQUENT_PERIOD_PRICE_TYPE) REFERENCES ITEM_PRICING_QUALIFIER (ITEM_PRICING_QUALIFIER_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_PPA_PROJECTION_PERIOD_PERIOD_SID'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_PPA_PROJECTION ADD CONSTRAINT FK_NM_PPA_PROJECTION_PERIOD_PERIOD_SID FOREIGN KEY (PERIOD_SID) REFERENCES PERIOD (PERIOD_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_PPA_PROJECTION_PROJECTION_DETAILS_PROJECTION_DETAILS_SID'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_PPA_PROJECTION ADD CONSTRAINT FK_NM_PPA_PROJECTION_PROJECTION_DETAILS_PROJECTION_DETAILS_SID FOREIGN KEY (PROJECTION_DETAILS_SID) REFERENCES PROJECTION_DETAILS (PROJECTION_DETAILS_SID)
END
	GO

IF EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_PPA_PROJECTION_FORECASTING_FORMULA_NET_BASE_PRICE_FORMULA'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_PPA_PROJECTION

	DROP CONSTRAINT FK_NM_PPA_PROJECTION_FORECASTING_FORMULA_NET_BASE_PRICE_FORMULA
END
GO

IF EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_PPA_PROJECTION_FORECASTING_FORMULA_NET_SUBSEQUENT_PERIOD_PRICE_FORMULA'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_PPA_PROJECTION

	DROP CONSTRAINT FK_NM_PPA_PROJECTION_FORECASTING_FORMULA_NET_SUBSEQUENT_PERIOD_PRICE_FORMULA
END
GO

IF EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_PPA_PROJECTION_FORECASTING_FORMULA_NET_PRICE_TYPE_FORMULA'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_PPA_PROJECTION

	DROP CONSTRAINT FK_NM_PPA_PROJECTION_FORECASTING_FORMULA_NET_PRICE_TYPE_FORMULA
END
GO

IF EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_PPA_PROJECTION_FORECASTING_FORMULA_NET_RESET_PRICE_FORMULA'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_PPA_PROJECTION

	DROP CONSTRAINT FK_NM_PPA_PROJECTION_FORECASTING_FORMULA_NET_RESET_PRICE_FORMULA
END
GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_PPA_PROJECTION_NET_SALES_FORMULA_MASTER_NET_BASE_PRICE_FORMULA'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_PPA_PROJECTION ADD CONSTRAINT FK_NM_PPA_PROJECTION_NET_SALES_FORMULA_MASTER_NET_BASE_PRICE_FORMULA FOREIGN KEY (NET_BASE_PRICE_FORMULA) REFERENCES NET_SALES_FORMULA_MASTER (NET_SALES_FORMULA_MASTER_SID)
END
GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_PPA_PROJECTION_NET_SALES_FORMULA_MASTER_NET_SUBSEQUENT_PERIOD_PRICE_FORMULA'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_PPA_PROJECTION ADD CONSTRAINT FK_NM_PPA_PROJECTION_NET_SALES_FORMULA_MASTER_NET_SUBSEQUENT_PERIOD_PRICE_FORMULA FOREIGN KEY (NET_SUBSEQUENT_PERIOD_PRICE_FORMULA) REFERENCES NET_SALES_FORMULA_MASTER (NET_SALES_FORMULA_MASTER_SID)
END
GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_PPA_PROJECTION_NET_SALES_FORMULA_MASTER_NET_PRICE_TYPE_FORMULA'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_PPA_PROJECTION ADD CONSTRAINT FK_NM_PPA_PROJECTION_NET_SALES_FORMULA_MASTER_NET_PRICE_TYPE_FORMULA FOREIGN KEY (NET_PRICE_TYPE_FORMULA) REFERENCES NET_SALES_FORMULA_MASTER (NET_SALES_FORMULA_MASTER_SID)
END
GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_PPA_PROJECTION'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_PPA_PROJECTION_NET_SALES_FORMULA_MASTER_NET_RESET_PRICE_FORMULA'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_PPA_PROJECTION ADD CONSTRAINT FK_NM_PPA_PROJECTION_NET_SALES_FORMULA_MASTER_NET_RESET_PRICE_FORMULA FOREIGN KEY (NET_RESET_PRICE_FORMULA) REFERENCES NET_SALES_FORMULA_MASTER (NET_SALES_FORMULA_MASTER_SID)
END
GO

-------------------------------------------------ST_NM_ACTUAL_PPA------------------------------------
IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_ACTUAL_PPA_HELPER_TABLE_BASE_PRICE_TYPE'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_ACTUAL_PPA ADD CONSTRAINT FK_ST_NM_ACTUAL_PPA_HELPER_TABLE_BASE_PRICE_TYPE FOREIGN KEY (BASE_PRICE_TYPE) REFERENCES HELPER_TABLE (HELPER_TABLE_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_ACTUAL_PPA_HELPER_TABLE_NET_BASE_PRICE'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_ACTUAL_PPA ADD CONSTRAINT FK_ST_NM_ACTUAL_PPA_HELPER_TABLE_NET_BASE_PRICE FOREIGN KEY (NET_BASE_PRICE) REFERENCES HELPER_TABLE (HELPER_TABLE_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_ACTUAL_PPA_HELPER_TABLE_NET_PRICE_TYPE'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_ACTUAL_PPA ADD CONSTRAINT FK_ST_NM_ACTUAL_PPA_HELPER_TABLE_NET_PRICE_TYPE FOREIGN KEY (NET_PRICE_TYPE) REFERENCES HELPER_TABLE (HELPER_TABLE_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_ACTUAL_PPA_HELPER_TABLE_NET_RESET_PRICE_TYPE'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_ACTUAL_PPA ADD CONSTRAINT FK_ST_NM_ACTUAL_PPA_HELPER_TABLE_NET_RESET_PRICE_TYPE FOREIGN KEY (NET_RESET_PRICE_TYPE) REFERENCES HELPER_TABLE (HELPER_TABLE_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_ACTUAL_PPA_HELPER_TABLE_NET_SUBSEQUENT_PERIOD_PRICE'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_ACTUAL_PPA ADD CONSTRAINT FK_ST_NM_ACTUAL_PPA_HELPER_TABLE_NET_SUBSEQUENT_PERIOD_PRICE FOREIGN KEY (NET_SUBSEQUENT_PERIOD_PRICE) REFERENCES HELPER_TABLE (HELPER_TABLE_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_ACTUAL_PPA_HELPER_TABLE_PRICE_TOLERANCE_FREQUENCY'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_ACTUAL_PPA ADD CONSTRAINT FK_ST_NM_ACTUAL_PPA_HELPER_TABLE_PRICE_TOLERANCE_FREQUENCY FOREIGN KEY (PRICE_TOLERANCE_FREQUENCY) REFERENCES HELPER_TABLE (HELPER_TABLE_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_ACTUAL_PPA_HELPER_TABLE_PRICE_TOLERANCE_INTERVAL'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_ACTUAL_PPA ADD CONSTRAINT FK_ST_NM_ACTUAL_PPA_HELPER_TABLE_PRICE_TOLERANCE_INTERVAL FOREIGN KEY (PRICE_TOLERANCE_INTERVAL) REFERENCES HELPER_TABLE (HELPER_TABLE_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_ACTUAL_PPA_HELPER_TABLE_PRICE_TOLERANCE_TYPE'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_ACTUAL_PPA ADD CONSTRAINT FK_ST_NM_ACTUAL_PPA_HELPER_TABLE_PRICE_TOLERANCE_TYPE FOREIGN KEY (PRICE_TOLERANCE_TYPE) REFERENCES HELPER_TABLE (HELPER_TABLE_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_ACTUAL_PPA_HELPER_TABLE_RESET_ELIGIBLE'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_ACTUAL_PPA ADD CONSTRAINT FK_ST_NM_ACTUAL_PPA_HELPER_TABLE_RESET_ELIGIBLE FOREIGN KEY (RESET_ELIGIBLE) REFERENCES HELPER_TABLE (HELPER_TABLE_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_ACTUAL_PPA_HELPER_TABLE_RESET_FREQUENCY'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_ACTUAL_PPA ADD CONSTRAINT FK_ST_NM_ACTUAL_PPA_HELPER_TABLE_RESET_FREQUENCY FOREIGN KEY (RESET_FREQUENCY) REFERENCES HELPER_TABLE (HELPER_TABLE_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_ACTUAL_PPA_HELPER_TABLE_RESET_INTERVAL'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_ACTUAL_PPA ADD CONSTRAINT FK_ST_NM_ACTUAL_PPA_HELPER_TABLE_RESET_INTERVAL FOREIGN KEY (RESET_INTERVAL) REFERENCES HELPER_TABLE (HELPER_TABLE_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_ACTUAL_PPA_ITEM_PRICING_QUALIFIER_BASE_PRICE_PRICE_TYPE'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_ACTUAL_PPA ADD CONSTRAINT FK_ST_NM_ACTUAL_PPA_ITEM_PRICING_QUALIFIER_BASE_PRICE_PRICE_TYPE FOREIGN KEY (BASE_PRICE_PRICE_TYPE) REFERENCES ITEM_PRICING_QUALIFIER (ITEM_PRICING_QUALIFIER_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_ACTUAL_PPA_ITEM_PRICING_QUALIFIER_ITEM_PRICING_QUALIFIER_SID'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_ACTUAL_PPA ADD CONSTRAINT FK_ST_NM_ACTUAL_PPA_ITEM_PRICING_QUALIFIER_ITEM_PRICING_QUALIFIER_SID FOREIGN KEY (ITEM_PRICING_QUALIFIER_SID) REFERENCES ITEM_PRICING_QUALIFIER (ITEM_PRICING_QUALIFIER_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_ACTUAL_PPA_ITEM_PRICING_QUALIFIER_RESET_PRICE_TYPE'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_ACTUAL_PPA ADD CONSTRAINT FK_ST_NM_ACTUAL_PPA_ITEM_PRICING_QUALIFIER_RESET_PRICE_TYPE FOREIGN KEY (RESET_PRICE_TYPE) REFERENCES ITEM_PRICING_QUALIFIER (ITEM_PRICING_QUALIFIER_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_ACTUAL_PPA_ITEM_PRICING_QUALIFIER_SUBSEQUENT_PERIOD_PRICE_TYPE'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_ACTUAL_PPA ADD CONSTRAINT FK_ST_NM_ACTUAL_PPA_ITEM_PRICING_QUALIFIER_SUBSEQUENT_PERIOD_PRICE_TYPE FOREIGN KEY (SUBSEQUENT_PERIOD_PRICE_TYPE) REFERENCES ITEM_PRICING_QUALIFIER (ITEM_PRICING_QUALIFIER_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_ACTUAL_PPA_PERIOD_PERIOD_SID'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_ACTUAL_PPA ADD CONSTRAINT FK_ST_NM_ACTUAL_PPA_PERIOD_PERIOD_SID FOREIGN KEY (PERIOD_SID) REFERENCES PERIOD (PERIOD_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_ACTUAL_PPA_PROJECTION_DETAILS_PROJECTION_DETAILS_SID'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_ACTUAL_PPA ADD CONSTRAINT FK_ST_NM_ACTUAL_PPA_PROJECTION_DETAILS_PROJECTION_DETAILS_SID FOREIGN KEY (PROJECTION_DETAILS_SID) REFERENCES PROJECTION_DETAILS (PROJECTION_DETAILS_SID)
END
	GO

IF EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_ACTUAL_PPA_FORECASTING_FORMULA_NET_BASE_PRICE_FORMULA'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_ACTUAL_PPA

	DROP CONSTRAINT FK_ST_NM_ACTUAL_PPA_FORECASTING_FORMULA_NET_BASE_PRICE_FORMULA
END
GO

IF EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_ACTUAL_PPA_FORECASTING_FORMULA_NET_SUBSEQUENT_PERIOD_PRICE_FORMULA'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_ACTUAL_PPA

	DROP CONSTRAINT FK_ST_NM_ACTUAL_PPA_FORECASTING_FORMULA_NET_SUBSEQUENT_PERIOD_PRICE_FORMULA
END
GO

IF EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_ACTUAL_PPA_FORECASTING_FORMULA_NET_PRICE_TYPE_FORMULA'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_ACTUAL_PPA

	DROP CONSTRAINT FK_ST_NM_ACTUAL_PPA_FORECASTING_FORMULA_NET_PRICE_TYPE_FORMULA
END
GO

IF EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_ACTUAL_PPA_FORECASTING_FORMULA_NET_RESET_PRICE_FORMULA'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_ACTUAL_PPA

	DROP CONSTRAINT FK_ST_NM_ACTUAL_PPA_FORECASTING_FORMULA_NET_RESET_PRICE_FORMULA
END
GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_ACTUAL_PPA_NET_SALES_FORMULA_MASTER_NET_BASE_PRICE_FORMULA'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_ACTUAL_PPA ADD CONSTRAINT FK_ST_NM_ACTUAL_PPA_NET_SALES_FORMULA_MASTER_NET_BASE_PRICE_FORMULA FOREIGN KEY (NET_BASE_PRICE_FORMULA) REFERENCES NET_SALES_FORMULA_MASTER (NET_SALES_FORMULA_MASTER_SID)
END
GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_ACTUAL_PPA_NET_SALES_FORMULA_MASTER_NET_SUBSEQUENT_PERIOD_PRICE_FORMULA'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_ACTUAL_PPA ADD CONSTRAINT FK_ST_NM_ACTUAL_PPA_NET_SALES_FORMULA_MASTER_NET_SUBSEQUENT_PERIOD_PRICE_FORMULA FOREIGN KEY (NET_SUBSEQUENT_PERIOD_PRICE_FORMULA) REFERENCES NET_SALES_FORMULA_MASTER (NET_SALES_FORMULA_MASTER_SID)
END
GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_ACTUAL_PPA_NET_SALES_FORMULA_MASTER_NET_PRICE_TYPE_FORMULA'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_ACTUAL_PPA ADD CONSTRAINT FK_ST_NM_ACTUAL_PPA_NET_SALES_FORMULA_MASTER_NET_PRICE_TYPE_FORMULA FOREIGN KEY (NET_PRICE_TYPE_FORMULA) REFERENCES NET_SALES_FORMULA_MASTER (NET_SALES_FORMULA_MASTER_SID)
END
GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_ST_NM_ACTUAL_PPA_NET_SALES_FORMULA_MASTER_NET_RESET_PRICE_FORMULA'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE ST_NM_ACTUAL_PPA ADD CONSTRAINT FK_ST_NM_ACTUAL_PPA_NET_SALES_FORMULA_MASTER_NET_RESET_PRICE_FORMULA FOREIGN KEY (NET_RESET_PRICE_FORMULA) REFERENCES NET_SALES_FORMULA_MASTER (NET_SALES_FORMULA_MASTER_SID)
END
GO

-----------------------------------NM_ACTUAL_PPA----------------------------------------------
IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_ACTUAL_PPA_HELPER_TABLE_BASE_PRICE_TYPE'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_ACTUAL_PPA ADD CONSTRAINT FK_NM_ACTUAL_PPA_HELPER_TABLE_BASE_PRICE_TYPE FOREIGN KEY (BASE_PRICE_TYPE) REFERENCES HELPER_TABLE (HELPER_TABLE_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_ACTUAL_PPA_HELPER_TABLE_NET_BASE_PRICE'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_ACTUAL_PPA ADD CONSTRAINT FK_NM_ACTUAL_PPA_HELPER_TABLE_NET_BASE_PRICE FOREIGN KEY (NET_BASE_PRICE) REFERENCES HELPER_TABLE (HELPER_TABLE_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_ACTUAL_PPA_HELPER_TABLE_NET_PRICE_TYPE'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_ACTUAL_PPA ADD CONSTRAINT FK_NM_ACTUAL_PPA_HELPER_TABLE_NET_PRICE_TYPE FOREIGN KEY (NET_PRICE_TYPE) REFERENCES HELPER_TABLE (HELPER_TABLE_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_ACTUAL_PPA_HELPER_TABLE_NET_RESET_PRICE_TYPE'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_ACTUAL_PPA ADD CONSTRAINT FK_NM_ACTUAL_PPA_HELPER_TABLE_NET_RESET_PRICE_TYPE FOREIGN KEY (NET_RESET_PRICE_TYPE) REFERENCES HELPER_TABLE (HELPER_TABLE_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_ACTUAL_PPA_HELPER_TABLE_NET_SUBSEQUENT_PERIOD_PRICE'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_ACTUAL_PPA ADD CONSTRAINT FK_NM_ACTUAL_PPA_HELPER_TABLE_NET_SUBSEQUENT_PERIOD_PRICE FOREIGN KEY (NET_SUBSEQUENT_PERIOD_PRICE) REFERENCES HELPER_TABLE (HELPER_TABLE_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_ACTUAL_PPA_HELPER_TABLE_PRICE_TOLERANCE_FREQUENCY'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_ACTUAL_PPA ADD CONSTRAINT FK_NM_ACTUAL_PPA_HELPER_TABLE_PRICE_TOLERANCE_FREQUENCY FOREIGN KEY (PRICE_TOLERANCE_FREQUENCY) REFERENCES HELPER_TABLE (HELPER_TABLE_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_ACTUAL_PPA_HELPER_TABLE_PRICE_TOLERANCE_INTERVAL'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_ACTUAL_PPA ADD CONSTRAINT FK_NM_ACTUAL_PPA_HELPER_TABLE_PRICE_TOLERANCE_INTERVAL FOREIGN KEY (PRICE_TOLERANCE_INTERVAL) REFERENCES HELPER_TABLE (HELPER_TABLE_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_ACTUAL_PPA_HELPER_TABLE_PRICE_TOLERANCE_TYPE'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_ACTUAL_PPA ADD CONSTRAINT FK_NM_ACTUAL_PPA_HELPER_TABLE_PRICE_TOLERANCE_TYPE FOREIGN KEY (PRICE_TOLERANCE_TYPE) REFERENCES HELPER_TABLE (HELPER_TABLE_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_ACTUAL_PPA_HELPER_TABLE_RESET_ELIGIBLE'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_ACTUAL_PPA ADD CONSTRAINT FK_NM_ACTUAL_PPA_HELPER_TABLE_RESET_ELIGIBLE FOREIGN KEY (RESET_ELIGIBLE) REFERENCES HELPER_TABLE (HELPER_TABLE_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_ACTUAL_PPA_HELPER_TABLE_RESET_FREQUENCY'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_ACTUAL_PPA ADD CONSTRAINT FK_NM_ACTUAL_PPA_HELPER_TABLE_RESET_FREQUENCY FOREIGN KEY (RESET_FREQUENCY) REFERENCES HELPER_TABLE (HELPER_TABLE_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_ACTUAL_PPA_HELPER_TABLE_RESET_INTERVAL'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_ACTUAL_PPA ADD CONSTRAINT FK_NM_ACTUAL_PPA_HELPER_TABLE_RESET_INTERVAL FOREIGN KEY (RESET_INTERVAL) REFERENCES HELPER_TABLE (HELPER_TABLE_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_ACTUAL_PPA_ITEM_PRICING_QUALIFIER_BASE_PRICE_PRICE_TYPE'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_ACTUAL_PPA ADD CONSTRAINT FK_NM_ACTUAL_PPA_ITEM_PRICING_QUALIFIER_BASE_PRICE_PRICE_TYPE FOREIGN KEY (BASE_PRICE_PRICE_TYPE) REFERENCES ITEM_PRICING_QUALIFIER (ITEM_PRICING_QUALIFIER_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_ACTUAL_PPA_ITEM_PRICING_QUALIFIER_ITEM_PRICING_QUALIFIER_SID'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_ACTUAL_PPA ADD CONSTRAINT FK_NM_ACTUAL_PPA_ITEM_PRICING_QUALIFIER_ITEM_PRICING_QUALIFIER_SID FOREIGN KEY (ITEM_PRICING_QUALIFIER_SID) REFERENCES ITEM_PRICING_QUALIFIER (ITEM_PRICING_QUALIFIER_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_ACTUAL_PPA_ITEM_PRICING_QUALIFIER_RESET_PRICE_TYPE'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_ACTUAL_PPA ADD CONSTRAINT FK_NM_ACTUAL_PPA_ITEM_PRICING_QUALIFIER_RESET_PRICE_TYPE FOREIGN KEY (RESET_PRICE_TYPE) REFERENCES ITEM_PRICING_QUALIFIER (ITEM_PRICING_QUALIFIER_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_ACTUAL_PPA_ITEM_PRICING_QUALIFIER_SUBSEQUENT_PERIOD_PRICE_TYPE'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_ACTUAL_PPA ADD CONSTRAINT FK_NM_ACTUAL_PPA_ITEM_PRICING_QUALIFIER_SUBSEQUENT_PERIOD_PRICE_TYPE FOREIGN KEY (SUBSEQUENT_PERIOD_PRICE_TYPE) REFERENCES ITEM_PRICING_QUALIFIER (ITEM_PRICING_QUALIFIER_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_ACTUAL_PPA_PERIOD_PERIOD_SID'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_ACTUAL_PPA ADD CONSTRAINT FK_NM_ACTUAL_PPA_PERIOD_PERIOD_SID FOREIGN KEY (PERIOD_SID) REFERENCES PERIOD (PERIOD_SID)
END
	GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_ACTUAL_PPA_PROJECTION_DETAILS_PROJECTION_DETAILS_SID'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_ACTUAL_PPA ADD CONSTRAINT FK_NM_ACTUAL_PPA_PROJECTION_DETAILS_PROJECTION_DETAILS_SID FOREIGN KEY (PROJECTION_DETAILS_SID) REFERENCES PROJECTION_DETAILS (PROJECTION_DETAILS_SID)
END
	GO

IF EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_ACTUAL_PPA_FORECASTING_FORMULA_NET_BASE_PRICE_FORMULA'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_ACTUAL_PPA

	DROP CONSTRAINT FK_NM_ACTUAL_PPA_FORECASTING_FORMULA_NET_BASE_PRICE_FORMULA
END
GO

IF EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_ACTUAL_PPA_FORECASTING_FORMULA_NET_SUBSEQUENT_PERIOD_PRICE_FORMULA'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_ACTUAL_PPA

	DROP CONSTRAINT FK_NM_ACTUAL_PPA_FORECASTING_FORMULA_NET_SUBSEQUENT_PERIOD_PRICE_FORMULA
END
GO

IF EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_ACTUAL_PPA_FORECASTING_FORMULA_NET_PRICE_TYPE_FORMULA'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_ACTUAL_PPA

	DROP CONSTRAINT FK_NM_ACTUAL_PPA_FORECASTING_FORMULA_NET_PRICE_TYPE_FORMULA
END
GO

IF EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_ACTUAL_PPA_FORECASTING_FORMULA_NET_RESET_PRICE_FORMULA'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_ACTUAL_PPA

	DROP CONSTRAINT FK_NM_ACTUAL_PPA_FORECASTING_FORMULA_NET_RESET_PRICE_FORMULA
END
GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_ACTUAL_PPA_NET_SALES_FORMULA_MASTER_NET_BASE_PRICE_FORMULA'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_ACTUAL_PPA ADD CONSTRAINT FK_NM_ACTUAL_PPA_NET_SALES_FORMULA_MASTER_NET_BASE_PRICE_FORMULA FOREIGN KEY (NET_BASE_PRICE_FORMULA) REFERENCES NET_SALES_FORMULA_MASTER (NET_SALES_FORMULA_MASTER_SID)
END
GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_ACTUAL_PPA_NET_SALES_FORMULA_MASTER_NET_SUBSEQUENT_PERIOD_PRICE_FORMULA'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_ACTUAL_PPA ADD CONSTRAINT FK_NM_ACTUAL_PPA_NET_SALES_FORMULA_MASTER_NET_SUBSEQUENT_PERIOD_PRICE_FORMULA FOREIGN KEY (NET_SUBSEQUENT_PERIOD_PRICE_FORMULA) REFERENCES NET_SALES_FORMULA_MASTER (NET_SALES_FORMULA_MASTER_SID)
END
GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_ACTUAL_PPA_NET_SALES_FORMULA_MASTER_NET_PRICE_TYPE_FORMULA'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_ACTUAL_PPA ADD CONSTRAINT FK_NM_ACTUAL_PPA_NET_SALES_FORMULA_MASTER_NET_PRICE_TYPE_FORMULA FOREIGN KEY (NET_PRICE_TYPE_FORMULA) REFERENCES NET_SALES_FORMULA_MASTER (NET_SALES_FORMULA_MASTER_SID)
END
GO

IF NOT EXISTS (
		SELECT 1
		FROM SYS.FOREIGN_KEYS
		WHERE OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_ACTUAL_PPA'
			AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
			AND NAME = 'FK_NM_ACTUAL_PPA_NET_SALES_FORMULA_MASTER_NET_RESET_PRICE_FORMULA'
			AND TYPE = 'F'
		)
BEGIN
	ALTER TABLE NM_ACTUAL_PPA ADD CONSTRAINT FK_NM_ACTUAL_PPA_NET_SALES_FORMULA_MASTER_NET_RESET_PRICE_FORMULA FOREIGN KEY (NET_RESET_PRICE_FORMULA) REFERENCES NET_SALES_FORMULA_MASTER (NET_SALES_FORMULA_MASTER_SID)
END
GO
----------------------------------

-------------------------------SALES ALTERNATE HISTORY--------------------------------------------------
-------------------------ST_CCP_ACTUAL_DETAILS--------------------------------------
IF NOT EXISTS (SELECT 1
               FROM   SYS.FOREIGN_KEYS
               WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_CCP_ACTUAL_DETAILS'
                      AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                      AND NAME = 'FK_ST_CCP_ACTUAL_DETAILS_CCP_DETAILS_CCP_DETAILS_SID'
                      AND TYPE = 'F')
  BEGIN
      ALTER TABLE ST_CCP_ACTUAL_DETAILS
        ADD CONSTRAINT FK_ST_CCP_ACTUAL_DETAILS_CCP_DETAILS_CCP_DETAILS_SID FOREIGN KEY (CCP_DETAILS_SID) REFERENCES CCP_DETAILS (CCP_DETAILS_SID)
  END

GO

IF NOT EXISTS (SELECT 1
               FROM   SYS.FOREIGN_KEYS
               WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_CCP_ACTUAL_DETAILS'
                      AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                      AND NAME = 'FK_ST_CCP_ACTUAL_DETAILS_PERIOD_PERIOD_SID'
                      AND TYPE = 'F')
  BEGIN
      ALTER TABLE ST_CCP_ACTUAL_DETAILS
        ADD CONSTRAINT FK_ST_CCP_ACTUAL_DETAILS_PERIOD_PERIOD_SID FOREIGN KEY (PERIOD_SID) REFERENCES PERIOD (PERIOD_SID)
  END

GO

-------------------------ST_ALTERNATE_HIST_ALLOCATION--------------------------------------
IF NOT EXISTS (SELECT *
               FROM   SYS.FOREIGN_KEYS
               WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_ALTERNATE_HIST_ALLOCATION'
                      AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                      AND NAME = 'FK_ST_ALTERNATE_HIST_ALLOCATION_PROJECTION_DETAILS_PROJECTION_DETAILS_SID'
                      AND TYPE = 'F')
  BEGIN
      ALTER TABLE ST_ALTERNATE_HIST_ALLOCATION
        ADD CONSTRAINT FK_ST_ALTERNATE_HIST_ALLOCATION_PROJECTION_DETAILS_PROJECTION_DETAILS_SID FOREIGN KEY (PROJECTION_DETAILS_SID) REFERENCES PROJECTION_DETAILS (PROJECTION_DETAILS_SID)
  END

GO


IF NOT EXISTS (SELECT 1
               FROM   SYS.FOREIGN_KEYS
               WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_ALTERNATE_HIST_ALLOCATION'
                      AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                      AND NAME = 'FK_ST_ALTERNATE_HIST_ALLOCATION_PERIOD_PERIOD_SID'
                      AND TYPE = 'F')
  BEGIN
      ALTER TABLE ST_ALTERNATE_HIST_ALLOCATION
        ADD CONSTRAINT FK_ST_ALTERNATE_HIST_ALLOCATION_PERIOD_PERIOD_SID FOREIGN KEY (PERIOD_SID) REFERENCES PERIOD (PERIOD_SID)
  END

GO 

-------------------------------------------------DISCOUNT ALTERNATE HISTORY-------------------
-------------------------------------------------ST_DISC_CCP_ACTUAL_DETAILS-------------------
-------------------------FOREIGN_KEYS-------------------------------------- 
IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_DISC_CCP_ACTUAL_DETAILS'
                     AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_ST_DISC_CCP_ACTUAL_DETAILS_CCP_DETAILS_CCP_DETAILS_SID'
                     AND TYPE = 'F')
                                  
 BEGIN

ALTER TABLE [DBO].[ST_DISC_CCP_ACTUAL_DETAILS]  ADD CONSTRAINT [FK_ST_DISC_CCP_ACTUAL_DETAILS_CCP_DETAILS_CCP_DETAILS_SID] FOREIGN KEY([CCP_DETAILS_SID])
REFERENCES CCP_DETAILS (CCP_DETAILS_SID)

END

GO

IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_DISC_CCP_ACTUAL_DETAILS'
                     AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_ST_DISC_CCP_ACTUAL_DETAILS_PERIOD_PERIOD_SID'
                     AND TYPE = 'F')
BEGIN

ALTER TABLE [DBO].[ST_DISC_CCP_ACTUAL_DETAILS]  ADD  CONSTRAINT [FK_ST_DISC_CCP_ACTUAL_DETAILS_PERIOD_PERIOD_SID] FOREIGN KEY([PERIOD_SID])
REFERENCES PERIOD (PERIOD_SID)

END
GO

-------------------------ST_DISC_ALTERNATE_HIST_ALLOCATION--------------------------------------
--CCP_DETAILS_SID
IF NOT EXISTS (SELECT 1
               FROM   SYS.FOREIGN_KEYS
               WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_DISC_ALTERNATE_HIST_ALLOCATION'
                      AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                      AND NAME = 'FK_ST_DISC_ALTERNATE_HIST_ALLOCATION_PROJECTION_DETAILS_PROJECTION_DETAILS_SID'
                      AND TYPE = 'F')
  BEGIN
      ALTER TABLE ST_DISC_ALTERNATE_HIST_ALLOCATION
        ADD CONSTRAINT FK_ST_DISC_ALTERNATE_HIST_ALLOCATION_PROJECTION_DETAILS_PROJECTION_DETAILS_SID FOREIGN KEY (PROJECTION_DETAILS_SID) REFERENCES PROJECTION_DETAILS (PROJECTION_DETAILS_SID)
  END

GO

--RS_MODEL_SID
IF NOT EXISTS (SELECT 1
               FROM   SYS.FOREIGN_KEYS
               WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_DISC_ALTERNATE_HIST_ALLOCATION'
                      AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                      AND NAME = 'FK_ST_DISC_ALTERNATE_HIST_ALLOCATION_RS_MODEL_RS_MODEL_SID'
                      AND TYPE = 'F')
  BEGIN
      ALTER TABLE ST_DISC_ALTERNATE_HIST_ALLOCATION
        ADD CONSTRAINT FK_ST_DISC_ALTERNATE_HIST_ALLOCATION_RS_MODEL_RS_MODEL_SID FOREIGN KEY (RS_MODEL_SID) REFERENCES RS_MODEL (RS_MODEL_SID)
  END

GO

--PERIOD_SID
IF NOT EXISTS (SELECT 1
               FROM   SYS.FOREIGN_KEYS
               WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_DISC_ALTERNATE_HIST_ALLOCATION'
                      AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                      AND NAME = 'FK_ST_DISC_ALTERNATE_HIST_ALLOCATION_PERIOD_PERIOD_SID'
                      AND TYPE = 'F')
  BEGIN
      ALTER TABLE ST_DISC_ALTERNATE_HIST_ALLOCATION
        ADD CONSTRAINT FK_ST_DISC_ALTERNATE_HIST_ALLOCATION_PERIOD_PERIOD_SID FOREIGN KEY (PERIOD_SID) REFERENCES PERIOD (PERIOD_SID)
  END

GO 
-------NM_ACTUAL_PPA---------------
IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_ACTUAL_PPA'
                     AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_NM_ACTUAL_PPA_RS_MODEL_RS_MODEL_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE NM_ACTUAL_PPA
        ADD CONSTRAINT FK_NM_ACTUAL_PPA_RS_MODEL_RS_MODEL_SID FOREIGN KEY(RS_MODEL_SID) REFERENCES RS_MODEL(RS_MODEL_SID)
  END
GO
---------------ST_NM_ACTUAL_PPA-----------------
IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_ACTUAL_PPA'
                     AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_ST_NM_ACTUAL_PPA_RS_MODEL_RS_MODEL_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE ST_NM_ACTUAL_PPA
        ADD CONSTRAINT FK_ST_NM_ACTUAL_PPA_RS_MODEL_RS_MODEL_SID FOREIGN KEY(RS_MODEL_SID) REFERENCES RS_MODEL(RS_MODEL_SID)
  END
GO


---------------NM_PPA_PROJECTION_MASTER-----------------
IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_PPA_PROJECTION_MASTER'
                     AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_NM_PPA_PROJECTION_MASTER_RS_MODEL_RS_MODEL_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE NM_PPA_PROJECTION_MASTER
        ADD CONSTRAINT FK_NM_PPA_PROJECTION_MASTER_RS_MODEL_RS_MODEL_SID FOREIGN KEY(RS_MODEL_SID) REFERENCES RS_MODEL(RS_MODEL_SID)
  END
GO 
IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_PPA_PROJECTION_MASTER'
                     AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_NM_PPA_PROJECTION_MASTER_HELPER_TABLE_REBATE_FREQUENCY'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE NM_PPA_PROJECTION_MASTER
        ADD CONSTRAINT FK_NM_PPA_PROJECTION_MASTER_HELPER_TABLE_REBATE_FREQUENCY FOREIGN KEY(REBATE_FREQUENCY) REFERENCES HELPER_TABLE(HELPER_TABLE_SID)
  END
GO 


------------NM_PPA_PROJECTION----------------------
IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'NM_PPA_PROJECTION'
                     AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_NM_PPA_PROJECTION_RS_MODEL_RS_MODEL_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE NM_PPA_PROJECTION
        ADD CONSTRAINT FK_NM_PPA_PROJECTION_RS_MODEL_RS_MODEL_SID FOREIGN KEY(RS_MODEL_SID) REFERENCES RS_MODEL(RS_MODEL_SID)
  END
GO 

---------------ST_NM_PPA_PROJECTION_MASTER-----------------
IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_PPA_PROJECTION_MASTER'
                     AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_ST_NM_PPA_PROJECTION_MASTER_RS_MODEL_RS_MODEL_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE ST_NM_PPA_PROJECTION_MASTER
        ADD CONSTRAINT FK_ST_NM_PPA_PROJECTION_MASTER_RS_MODEL_RS_MODEL_SID FOREIGN KEY(RS_MODEL_SID) REFERENCES RS_MODEL(RS_MODEL_SID)
  END
GO 
IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_PPA_PROJECTION_MASTER'
                     AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_ST_NM_PPA_PROJECTION_MASTER_HELPER_TABLE_REBATE_FREQUENCY'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE ST_NM_PPA_PROJECTION_MASTER
        ADD CONSTRAINT FK_ST_NM_PPA_PROJECTION_MASTER_HELPER_TABLE_REBATE_FREQUENCY FOREIGN KEY(REBATE_FREQUENCY) REFERENCES HELPER_TABLE(HELPER_TABLE_SID)
  END
GO 

------------ST_NM_PPA_PROJECTION----------------------
IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  OBJECT_NAME(PARENT_OBJECT_ID) = 'ST_NM_PPA_PROJECTION'
                     AND SCHEMA_NAME(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_ST_NM_PPA_PROJECTION_RS_MODEL_RS_MODEL_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE ST_NM_PPA_PROJECTION
        ADD CONSTRAINT FK_ST_NM_PPA_PROJECTION_RS_MODEL_RS_MODEL_SID FOREIGN KEY(RS_MODEL_SID) REFERENCES RS_MODEL(RS_MODEL_SID)
  END
GO 



--------------------alternate history main tables-------------------------




IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  Object_name(PARENT_OBJECT_ID) = 'ALTERNATE_HIST_ALLOCATION'
                     AND Schema_name(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_ALTERNATE_HIST_ALLOCATION_PERIOD_PERIOD_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE [ALTERNATE_HIST_ALLOCATION]
        ADD CONSTRAINT [FK_ALTERNATE_HIST_ALLOCATION_PERIOD_PERIOD_SID] FOREIGN KEY([PERIOD_SID]) REFERENCES [dbo].[PERIOD] ([PERIOD_SID])
  END

GO

IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  Object_name(PARENT_OBJECT_ID) = 'ALTERNATE_HIST_ALLOCATION'
                     AND Schema_name(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_ALTERNATE_HIST_ALLOCATION_PROJECTION_DETAILS_PROJECTION_DETAILS_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE [ALTERNATE_HIST_ALLOCATION]
        ADD CONSTRAINT [FK_ALTERNATE_HIST_ALLOCATION_PROJECTION_DETAILS_PROJECTION_DETAILS_SID] FOREIGN KEY([PROJECTION_DETAILS_SID]) REFERENCES [dbo].[PROJECTION_DETAILS] ([PROJECTION_DETAILS_SID])
  END

GO

IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  Object_name(PARENT_OBJECT_ID) = 'DISC_ALTERNATE_HIST_ALLOCATION'
                     AND Schema_name(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_DISC_ALTERNATE_HIST_ALLOCATION_PERIOD_PERIOD_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE [DISC_ALTERNATE_HIST_ALLOCATION]
        ADD CONSTRAINT [FK_DISC_ALTERNATE_HIST_ALLOCATION_PERIOD_PERIOD_SID] FOREIGN KEY([PERIOD_SID]) REFERENCES [dbo].[PERIOD] ([PERIOD_SID])
  END

GO

IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  Object_name(PARENT_OBJECT_ID) = 'DISC_ALTERNATE_HIST_ALLOCATION'
                     AND Schema_name(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_DISC_ALTERNATE_HIST_ALLOCATION_PROJECTION_DETAILS_PROJECTION_DETAILS_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE [DISC_ALTERNATE_HIST_ALLOCATION]
        ADD CONSTRAINT [FK_DISC_ALTERNATE_HIST_ALLOCATION_PROJECTION_DETAILS_PROJECTION_DETAILS_SID] FOREIGN KEY([PROJECTION_DETAILS_SID]) REFERENCES [dbo].[PROJECTION_DETAILS] ([PROJECTION_DETAILS_SID])
  END

GO

IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  Object_name(PARENT_OBJECT_ID) = 'DISC_ALTERNATE_HIST_ALLOCATION'
                     AND Schema_name(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_DISC_ALTERNATE_HIST_ALLOCATION_RS_MODEL_RS_MODEL_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE [DISC_ALTERNATE_HIST_ALLOCATION]
        ADD CONSTRAINT [FK_DISC_ALTERNATE_HIST_ALLOCATION_RS_MODEL_RS_MODEL_SID] FOREIGN KEY([RS_MODEL_SID]) REFERENCES [dbo].[RS_MODEL] ([RS_MODEL_SID])
  END

GO


IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  Object_name(PARENT_OBJECT_ID) = 'CCP_ACTUAL_DETAILS'
                     AND Schema_name(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_CCP_ACTUAL_DETAILS_CCP_DETAILS_CCP_DETAILS_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE [dbo].[CCP_ACTUAL_DETAILS]
        ADD CONSTRAINT [FK_CCP_ACTUAL_DETAILS_CCP_DETAILS_CCP_DETAILS_SID] FOREIGN KEY([CCP_DETAILS_SID]) REFERENCES [dbo].[CCP_DETAILS] ([CCP_DETAILS_SID])
  END

GO

IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  Object_name(PARENT_OBJECT_ID) = 'CCP_ACTUAL_DETAILS'
                     AND Schema_name(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_CCP_ACTUAL_DETAILS_PERIOD_PERIOD_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE [dbo].[CCP_ACTUAL_DETAILS]
        ADD CONSTRAINT [FK_CCP_ACTUAL_DETAILS_PERIOD_PERIOD_SID] FOREIGN KEY([PERIOD_SID]) REFERENCES [dbo].[PERIOD] ([PERIOD_SID])
  END

GO


IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  Object_name(PARENT_OBJECT_ID) = 'DISC_CCP_ACTUAL_DETAILS'
                     AND Schema_name(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_DISC_CCP_ACTUAL_DETAILS_CCP_DETAILS_CCP_DETAILS_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE [dbo].[DISC_CCP_ACTUAL_DETAILS]
        ADD CONSTRAINT [FK_DISC_CCP_ACTUAL_DETAILS_CCP_DETAILS_CCP_DETAILS_SID] FOREIGN KEY([CCP_DETAILS_SID]) REFERENCES [dbo].[CCP_DETAILS] ([CCP_DETAILS_SID])
  END

GO

IF NOT EXISTS(SELECT 1
              FROM   SYS.FOREIGN_KEYS
              WHERE  Object_name(PARENT_OBJECT_ID) = 'DISC_CCP_ACTUAL_DETAILS'
                     AND Schema_name(SCHEMA_ID) = 'DBO'
                     AND NAME = 'FK_DISC_CCP_ACTUAL_DETAILS_PERIOD_PERIOD_SID'
                     AND TYPE = 'F')
  BEGIN
      ALTER TABLE [dbo].[DISC_CCP_ACTUAL_DETAILS]
        ADD CONSTRAINT [FK_DISC_CCP_ACTUAL_DETAILS_PERIOD_PERIOD_SID] FOREIGN KEY([PERIOD_SID]) REFERENCES [dbo].[PERIOD] ([PERIOD_SID])
  END

GO 


----------------------------CASCADE DELETE--------------------------------

IF EXISTS(SELECT 1
          FROM   SYS.FOREIGN_KEYS
          WHERE  Object_name(PARENT_OBJECT_ID) = 'NM_SALES_PROJECTION_MASTER'
                 AND Schema_name(SCHEMA_ID) = 'DBO'
                 AND NAME = 'FK_NM_SALES_PROJECTION_MASTER_PROJECTION_DETAILS_PROJECTION_DETAILS_SID'
                 AND TYPE = 'F'
                 AND delete_referential_action_desc <> 'CASCADE')
  BEGIN
      ALTER TABLE NM_SALES_PROJECTION_MASTER
        DROP CONSTRAINT FK_NM_SALES_PROJECTION_MASTER_PROJECTION_DETAILS_PROJECTION_DETAILS_SID

      ALTER TABLE [NM_SALES_PROJECTION_MASTER]
        ADD CONSTRAINT FK_NM_SALES_PROJECTION_MASTER_PROJECTION_DETAILS_PROJECTION_DETAILS_SID FOREIGN KEY([PROJECTION_DETAILS_SID]) REFERENCES PROJECTION_DETAILS([PROJECTION_DETAILS_SID]) ON DELETE CASCADE
  END
ELSE
  BEGIN
      IF NOT EXISTS(SELECT 1
                    FROM   SYS.FOREIGN_KEYS
                    WHERE  Object_name(PARENT_OBJECT_ID) = 'NM_SALES_PROJECTION_MASTER'
                           AND Schema_name(SCHEMA_ID) = 'DBO'
                           AND NAME = 'FK_NM_SALES_PROJECTION_MASTER_PROJECTION_DETAILS_PROJECTION_DETAILS_SID'
                           AND TYPE = 'F')
        ALTER TABLE [NM_SALES_PROJECTION_MASTER]
          ADD CONSTRAINT FK_NM_SALES_PROJECTION_MASTER_PROJECTION_DETAILS_PROJECTION_DETAILS_SID FOREIGN KEY([PROJECTION_DETAILS_SID]) REFERENCES PROJECTION_DETAILS([PROJECTION_DETAILS_SID]) ON DELETE CASCADE
  END

IF EXISTS(SELECT 1
          FROM   SYS.FOREIGN_KEYS
          WHERE  Object_name(PARENT_OBJECT_ID) = 'NM_ACTUAL_SALES'
                 AND Schema_name(SCHEMA_ID) = 'DBO'
                 AND NAME = 'FK_NM_ACTUAL_SALES_PROJECTION_DETAILS_PROJECTION_DETAILS_SID'
                 AND TYPE = 'F'
                 AND delete_referential_action_desc <> 'CASCADE')
  BEGIN
      ALTER TABLE NM_ACTUAL_SALES
        DROP CONSTRAINT FK_NM_ACTUAL_SALES_PROJECTION_DETAILS_PROJECTION_DETAILS_SID

      ALTER TABLE [NM_ACTUAL_SALES]
        ADD CONSTRAINT FK_NM_ACTUAL_SALES_PROJECTION_DETAILS_PROJECTION_DETAILS_SID FOREIGN KEY([PROJECTION_DETAILS_SID]) REFERENCES PROJECTION_DETAILS([PROJECTION_DETAILS_SID]) ON DELETE CASCADE
  END
ELSE
  BEGIN
      IF NOT EXISTS(SELECT 1
                    FROM   SYS.FOREIGN_KEYS
                    WHERE  Object_name(PARENT_OBJECT_ID) = 'NM_ACTUAL_SALES'
                           AND Schema_name(SCHEMA_ID) = 'DBO'
                           AND NAME = 'FK_NM_ACTUAL_SALES_PROJECTION_DETAILS_PROJECTION_DETAILS_SID'
                           AND TYPE = 'F')
        ALTER TABLE [NM_ACTUAL_SALES]
          ADD CONSTRAINT FK_NM_ACTUAL_SALES_PROJECTION_DETAILS_PROJECTION_DETAILS_SID FOREIGN KEY([PROJECTION_DETAILS_SID]) REFERENCES PROJECTION_DETAILS([PROJECTION_DETAILS_SID]) ON DELETE CASCADE
  END

IF EXISTS(SELECT 1
          FROM   SYS.FOREIGN_KEYS
          WHERE  Object_name(PARENT_OBJECT_ID) = 'NM_SALES_PROJECTION'
                 AND Schema_name(SCHEMA_ID) = 'DBO'
                 AND NAME = 'FK_NM_SALES_PROJECTION_PROJECTION_DETAILS_PROJECTION_DETAILS_SID'
                 AND TYPE = 'F'
                 AND delete_referential_action_desc <> 'CASCADE')
  BEGIN
      ALTER TABLE NM_SALES_PROJECTION
        DROP CONSTRAINT FK_NM_SALES_PROJECTION_PROJECTION_DETAILS_PROJECTION_DETAILS_SID

      ALTER TABLE [NM_SALES_PROJECTION]
        ADD CONSTRAINT FK_NM_SALES_PROJECTION_PROJECTION_DETAILS_PROJECTION_DETAILS_SID FOREIGN KEY([PROJECTION_DETAILS_SID]) REFERENCES PROJECTION_DETAILS([PROJECTION_DETAILS_SID]) ON DELETE CASCADE
  END
ELSE
  BEGIN
      IF NOT EXISTS(SELECT 1
                    FROM   SYS.FOREIGN_KEYS
                    WHERE  Object_name(PARENT_OBJECT_ID) = 'NM_SALES_PROJECTION'
                           AND Schema_name(SCHEMA_ID) = 'DBO'
                           AND NAME = 'FK_NM_SALES_PROJECTION_PROJECTION_DETAILS_PROJECTION_DETAILS_SID'
                           AND TYPE = 'F')
        ALTER TABLE [NM_SALES_PROJECTION]
          ADD CONSTRAINT FK_NM_SALES_PROJECTION_PROJECTION_DETAILS_PROJECTION_DETAILS_SID FOREIGN KEY([PROJECTION_DETAILS_SID]) REFERENCES PROJECTION_DETAILS([PROJECTION_DETAILS_SID]) ON DELETE CASCADE
  END

IF EXISTS(SELECT 1
          FROM   SYS.FOREIGN_KEYS
          WHERE  Object_name(PARENT_OBJECT_ID) = 'NM_DISCOUNT_PROJ_MASTER'
                 AND Schema_name(SCHEMA_ID) = 'DBO'
                 AND NAME = 'FK_NM_DISCOUNT_PROJ_MASTER_PROJECTION_DETAILS_PROJECTION_DETAILS_SID'
                 AND TYPE = 'F'
                 AND delete_referential_action_desc <> 'CASCADE')
  BEGIN
      ALTER TABLE NM_DISCOUNT_PROJ_MASTER
        DROP CONSTRAINT FK_NM_DISCOUNT_PROJ_MASTER_PROJECTION_DETAILS_PROJECTION_DETAILS_SID

      ALTER TABLE [NM_DISCOUNT_PROJ_MASTER]
        ADD CONSTRAINT FK_NM_DISCOUNT_PROJ_MASTER_PROJECTION_DETAILS_PROJECTION_DETAILS_SID FOREIGN KEY([PROJECTION_DETAILS_SID]) REFERENCES PROJECTION_DETAILS([PROJECTION_DETAILS_SID]) ON DELETE CASCADE
  END
ELSE
  BEGIN
      IF NOT EXISTS(SELECT 1
                    FROM   SYS.FOREIGN_KEYS
                    WHERE  Object_name(PARENT_OBJECT_ID) = 'NM_DISCOUNT_PROJ_MASTER'
                           AND Schema_name(SCHEMA_ID) = 'DBO'
                           AND NAME = 'FK_NM_DISCOUNT_PROJ_MASTER_PROJECTION_DETAILS_PROJECTION_DETAILS_SID'
                           AND TYPE = 'F')
        ALTER TABLE [NM_DISCOUNT_PROJ_MASTER]
          ADD CONSTRAINT FK_NM_DISCOUNT_PROJ_MASTER_PROJECTION_DETAILS_PROJECTION_DETAILS_SID FOREIGN KEY([PROJECTION_DETAILS_SID]) REFERENCES PROJECTION_DETAILS([PROJECTION_DETAILS_SID]) ON DELETE CASCADE
  END

IF EXISTS(SELECT 1
          FROM   SYS.FOREIGN_KEYS
          WHERE  Object_name(PARENT_OBJECT_ID) = 'NM_ACTUAL_DISCOUNT'
                 AND Schema_name(SCHEMA_ID) = 'DBO'
                 AND NAME = 'FK_NM_ACTUAL_DISCOUNT_PROJECTION_DETAILS_PROJECTION_DETAILS_SID'
                 AND TYPE = 'F'
                 AND delete_referential_action_desc <> 'CASCADE')
  BEGIN
      ALTER TABLE NM_ACTUAL_DISCOUNT
        DROP CONSTRAINT FK_NM_ACTUAL_DISCOUNT_PROJECTION_DETAILS_PROJECTION_DETAILS_SID

      ALTER TABLE [NM_ACTUAL_DISCOUNT]
        ADD CONSTRAINT FK_NM_ACTUAL_DISCOUNT_PROJECTION_DETAILS_PROJECTION_DETAILS_SID FOREIGN KEY([PROJECTION_DETAILS_SID]) REFERENCES PROJECTION_DETAILS([PROJECTION_DETAILS_SID]) ON DELETE CASCADE
  END
ELSE
  BEGIN
      IF NOT EXISTS(SELECT 1
                    FROM   SYS.FOREIGN_KEYS
                    WHERE  Object_name(PARENT_OBJECT_ID) = 'NM_ACTUAL_DISCOUNT'
                           AND Schema_name(SCHEMA_ID) = 'DBO'
                           AND NAME = 'FK_NM_ACTUAL_DISCOUNT_PROJECTION_DETAILS_PROJECTION_DETAILS_SID'
                           AND TYPE = 'F')
        ALTER TABLE [NM_ACTUAL_DISCOUNT]
          ADD CONSTRAINT FK_NM_ACTUAL_DISCOUNT_PROJECTION_DETAILS_PROJECTION_DETAILS_SID FOREIGN KEY([PROJECTION_DETAILS_SID]) REFERENCES PROJECTION_DETAILS([PROJECTION_DETAILS_SID]) ON DELETE CASCADE
  END

IF EXISTS(SELECT 1
          FROM   SYS.FOREIGN_KEYS
          WHERE  Object_name(PARENT_OBJECT_ID) = 'NM_DISCOUNT_PROJECTION'
                 AND Schema_name(SCHEMA_ID) = 'DBO'
                 AND NAME = 'FK_NM_DISCOUNT_PROJECTION_PROJECTION_DETAILS_PROJECTION_DETAILS_SID'
                 AND TYPE = 'F'
                 AND delete_referential_action_desc <> 'CASCADE')
  BEGIN
      ALTER TABLE NM_DISCOUNT_PROJECTION
        DROP CONSTRAINT FK_NM_DISCOUNT_PROJECTION_PROJECTION_DETAILS_PROJECTION_DETAILS_SID

      ALTER TABLE [NM_DISCOUNT_PROJECTION]
        ADD CONSTRAINT FK_NM_DISCOUNT_PROJECTION_PROJECTION_DETAILS_PROJECTION_DETAILS_SID FOREIGN KEY([PROJECTION_DETAILS_SID]) REFERENCES PROJECTION_DETAILS([PROJECTION_DETAILS_SID]) ON DELETE CASCADE
  END
ELSE
  BEGIN
      IF NOT EXISTS(SELECT 1
                    FROM   SYS.FOREIGN_KEYS
                    WHERE  Object_name(PARENT_OBJECT_ID) = 'NM_DISCOUNT_PROJECTION'
                           AND Schema_name(SCHEMA_ID) = 'DBO'
                           AND NAME = 'FK_NM_DISCOUNT_PROJECTION_PROJECTION_DETAILS_PROJECTION_DETAILS_SID'
                           AND TYPE = 'F')
        ALTER TABLE [NM_DISCOUNT_PROJECTION]
          ADD CONSTRAINT FK_NM_DISCOUNT_PROJECTION_PROJECTION_DETAILS_PROJECTION_DETAILS_SID FOREIGN KEY([PROJECTION_DETAILS_SID]) REFERENCES PROJECTION_DETAILS([PROJECTION_DETAILS_SID]) ON DELETE CASCADE
  END

IF EXISTS(SELECT 1
          FROM   SYS.FOREIGN_KEYS
          WHERE  Object_name(PARENT_OBJECT_ID) = 'NM_PPA_PROJECTION_MASTER'
                 AND Schema_name(SCHEMA_ID) = 'DBO'
                 AND NAME = 'FK_NM_PPA_PROJECTION_MASTER_PROJECTION_DETAILS_PROJECTION_DETAILS_SID'
                 AND TYPE = 'F'
                 AND delete_referential_action_desc <> 'CASCADE')
  BEGIN
      ALTER TABLE NM_PPA_PROJECTION_MASTER
        DROP CONSTRAINT FK_NM_PPA_PROJECTION_MASTER_PROJECTION_DETAILS_PROJECTION_DETAILS_SID

      ALTER TABLE [NM_PPA_PROJECTION_MASTER]
        ADD CONSTRAINT FK_NM_PPA_PROJECTION_MASTER_PROJECTION_DETAILS_PROJECTION_DETAILS_SID FOREIGN KEY([PROJECTION_DETAILS_SID]) REFERENCES PROJECTION_DETAILS([PROJECTION_DETAILS_SID]) ON DELETE CASCADE
  END
ELSE
  BEGIN
      IF NOT EXISTS(SELECT 1
                    FROM   SYS.FOREIGN_KEYS
                    WHERE  Object_name(PARENT_OBJECT_ID) = 'NM_PPA_PROJECTION_MASTER'
                           AND Schema_name(SCHEMA_ID) = 'DBO'
                           AND NAME = 'FK_NM_PPA_PROJECTION_MASTER_PROJECTION_DETAILS_PROJECTION_DETAILS_SID'
                           AND TYPE = 'F')
        ALTER TABLE [NM_PPA_PROJECTION_MASTER]
          ADD CONSTRAINT FK_NM_PPA_PROJECTION_MASTER_PROJECTION_DETAILS_PROJECTION_DETAILS_SID FOREIGN KEY([PROJECTION_DETAILS_SID]) REFERENCES PROJECTION_DETAILS([PROJECTION_DETAILS_SID]) ON DELETE CASCADE
  END

IF EXISTS(SELECT 1
          FROM   SYS.FOREIGN_KEYS
          WHERE  Object_name(PARENT_OBJECT_ID) = 'NM_ACTUAL_PPA'
                 AND Schema_name(SCHEMA_ID) = 'DBO'
                 AND NAME = 'FK_NM_ACTUAL_PPA_PROJECTION_DETAILS_PROJECTION_DETAILS_SID'
                 AND TYPE = 'F'
                 AND delete_referential_action_desc <> 'CASCADE')
  BEGIN
      ALTER TABLE NM_ACTUAL_PPA
        DROP CONSTRAINT FK_NM_ACTUAL_PPA_PROJECTION_DETAILS_PROJECTION_DETAILS_SID

      ALTER TABLE [NM_ACTUAL_PPA]
        ADD CONSTRAINT FK_NM_ACTUAL_PPA_PROJECTION_DETAILS_PROJECTION_DETAILS_SID FOREIGN KEY([PROJECTION_DETAILS_SID]) REFERENCES PROJECTION_DETAILS([PROJECTION_DETAILS_SID]) ON DELETE CASCADE
  END
ELSE
  BEGIN
      IF NOT EXISTS(SELECT 1
                    FROM   SYS.FOREIGN_KEYS
                    WHERE  Object_name(PARENT_OBJECT_ID) = 'NM_ACTUAL_PPA'
                           AND Schema_name(SCHEMA_ID) = 'DBO'
                           AND NAME = 'FK_NM_ACTUAL_PPA_PROJECTION_DETAILS_PROJECTION_DETAILS_SID'
                           AND TYPE = 'F')
        ALTER TABLE [NM_ACTUAL_PPA]
          ADD CONSTRAINT FK_NM_ACTUAL_PPA_PROJECTION_DETAILS_PROJECTION_DETAILS_SID FOREIGN KEY([PROJECTION_DETAILS_SID]) REFERENCES PROJECTION_DETAILS([PROJECTION_DETAILS_SID]) ON DELETE CASCADE
  END

IF EXISTS(SELECT 1
          FROM   SYS.FOREIGN_KEYS
          WHERE  Object_name(PARENT_OBJECT_ID) = 'NM_PPA_PROJECTION'
                 AND Schema_name(SCHEMA_ID) = 'DBO'
                 AND NAME = 'FK_NM_PPA_PROJECTION_PROJECTION_DETAILS_PROJECTION_DETAILS_SID'
                 AND TYPE = 'F'
                 AND delete_referential_action_desc <> 'CASCADE')
  BEGIN
      ALTER TABLE NM_PPA_PROJECTION
        DROP CONSTRAINT FK_NM_PPA_PROJECTION_PROJECTION_DETAILS_PROJECTION_DETAILS_SID

      ALTER TABLE [NM_PPA_PROJECTION]
        ADD CONSTRAINT FK_NM_PPA_PROJECTION_PROJECTION_DETAILS_PROJECTION_DETAILS_SID FOREIGN KEY([PROJECTION_DETAILS_SID]) REFERENCES PROJECTION_DETAILS([PROJECTION_DETAILS_SID]) ON DELETE CASCADE
  END
ELSE
  BEGIN
      IF NOT EXISTS(SELECT 1
                    FROM   SYS.FOREIGN_KEYS
                    WHERE  Object_name(PARENT_OBJECT_ID) = 'NM_PPA_PROJECTION'
                           AND Schema_name(SCHEMA_ID) = 'DBO'
                           AND NAME = 'FK_NM_PPA_PROJECTION_PROJECTION_DETAILS_PROJECTION_DETAILS_SID'
                           AND TYPE = 'F')
        ALTER TABLE [NM_PPA_PROJECTION]
          ADD CONSTRAINT FK_NM_PPA_PROJECTION_PROJECTION_DETAILS_PROJECTION_DETAILS_SID FOREIGN KEY([PROJECTION_DETAILS_SID]) REFERENCES PROJECTION_DETAILS([PROJECTION_DETAILS_SID]) ON DELETE CASCADE
  END

IF EXISTS(SELECT 1
          FROM   SYS.FOREIGN_KEYS
          WHERE  Object_name(PARENT_OBJECT_ID) = 'NM_ASSUMPTIONS'
                 AND Schema_name(SCHEMA_ID) = 'DBO'
                 AND NAME = 'FK_NM_ASSUMPTIONS_PROJECTION_DETAILS_PROJECTION_DETAILS_SID'
                 AND TYPE = 'F'
                 AND delete_referential_action_desc <> 'CASCADE')
  BEGIN
      ALTER TABLE NM_ASSUMPTIONS
        DROP CONSTRAINT FK_NM_ASSUMPTIONS_PROJECTION_DETAILS_PROJECTION_DETAILS_SID

      ALTER TABLE [NM_ASSUMPTIONS]
        ADD CONSTRAINT FK_NM_ASSUMPTIONS_PROJECTION_DETAILS_PROJECTION_DETAILS_SID FOREIGN KEY([PROJECTION_DETAILS_SID]) REFERENCES PROJECTION_DETAILS([PROJECTION_DETAILS_SID]) ON DELETE CASCADE
  END
ELSE
  BEGIN
      IF NOT EXISTS(SELECT 1
                    FROM   SYS.FOREIGN_KEYS
                    WHERE  Object_name(PARENT_OBJECT_ID) = 'NM_ASSUMPTIONS'
                           AND Schema_name(SCHEMA_ID) = 'DBO'
                           AND NAME = 'FK_NM_ASSUMPTIONS_PROJECTION_DETAILS_PROJECTION_DETAILS_SID'
                           AND TYPE = 'F')
        ALTER TABLE [NM_ASSUMPTIONS]
          ADD CONSTRAINT FK_NM_ASSUMPTIONS_PROJECTION_DETAILS_PROJECTION_DETAILS_SID FOREIGN KEY([PROJECTION_DETAILS_SID]) REFERENCES PROJECTION_DETAILS([PROJECTION_DETAILS_SID]) ON DELETE CASCADE
  END 
