<?xml version="1.0" encoding="UTF-8"?>
<custom-sql>
    <sql id="wi.viewCount">
	<![CDATA[
            SELECT COUNT(WORKFLOW_ID) FROM WORKFLOW_INBOX WHERE VIEW_TYPE like '?' and VIEW_NAME LIKE '?'
            ?
            
        ]]>
    </sql>
    <sql id="wi.viewSearch">
	<![CDATA[
        SELECT
            VIEW_NAME,
            VIEW_TYPE,
            BUSINESS_PROCESS,
            WORKFLOW_ID,
            WORKFLOW_NAME,
            WORKFLOW_DESCRIPTION,
            CREATION_FROM_DATE,
            CREATION_TO_DATE,
            APPROVED_DATE_FROM,
            APPROVED_DATE_TO,
            WF_CREATED_BY,
            APPROVED_BY,
            CONTRACT_ID,
            CONTRACT_NO,
            CONTRACT_NAME,
            CONTRACT_TYPE,
            COMPANY_ID,
            COMPANY_NO,
            COMPANY_NAME,
            ITEM_ID,
            ITEM_NO,
            ITEM_NAME,
            DEDUCTION_LEVEL,
            DEDUCTION_VALUE,
            WORKFLOW_INBOX_SID
        FROM
            WORKFLOW_INBOX 
        WHERE VIEW_TYPE = '?' and VIEW_NAME LIKE '?' 
        ? ? OFFSET ? ROWS FETCH NEXT ? ROWS ONLY ;
        ]]>
    </sql>
    <sql id="wi.insertView">
	<![CDATA[
            INSERT INTO WORKFLOW_INBOX(
            VIEW_NAME,
            VIEW_TYPE,
            BUSINESS_PROCESS,
            WORKFLOW_ID,
            WORKFLOW_NAME,
            WORKFLOW_DESCRIPTION,
            CREATION_FROM_DATE,
            CREATION_TO_DATE,
            APPROVED_DATE_FROM,
            APPROVED_DATE_TO,
            WF_CREATED_BY,
            APPROVED_BY,
            CONTRACT_ID,
            CONTRACT_NO,
            CONTRACT_NAME,
            CONTRACT_TYPE,
            COMPANY_ID,
            COMPANY_NO,
            COMPANY_NAME,
            ITEM_ID,
            ITEM_NO,
            ITEM_NAME,
            DEDUCTION_LEVEL,
            DEDUCTION_VALUE,
            CREATED_BY, 
            CREATED_DATE 
        )
    VALUES('?','?','?','?','?','?',
            ?,?,?,?,
            '?','?','?','?','?','?','?','?','?','?','?','?','?','?','?', getDate());
        ]]>
    </sql>
    <sql id="wi.updateView">
	<![CDATA[
        UPDATE WORKFLOW_INBOX 
        SET VIEW_NAME = '?',
            VIEW_TYPE = '?',
            BUSINESS_PROCESS = '?',
            WORKFLOW_ID = '?',
            WORKFLOW_NAME = '?',
            WORKFLOW_DESCRIPTION = '?',
            CREATION_FROM_DATE = ?,
            CREATION_TO_DATE = ?,
            APPROVED_DATE_FROM = ?,
            APPROVED_DATE_TO = ?,
            WF_CREATED_BY = '?',
            APPROVED_BY = '?',
            CONTRACT_ID = '?',
            CONTRACT_NO = '?',
            CONTRACT_NAME = '?',
            CONTRACT_TYPE = '?',
            COMPANY_ID = '?',
            COMPANY_NO = '?',
            COMPANY_NAME = '?',
            ITEM_ID = '?',
            ITEM_NO = '?',
            ITEM_NAME = '?',
            DEDUCTION_LEVEL = '?',
            DEDUCTION_VALUE = '?'
        WHERE
            WORKFLOW_INBOX_SID = '?';
        ]]>
    </sql>
    
    <sql id="wi.deleteView">
	<![CDATA[
          DELETE from WORKFLOW_INBOX where WORKFLOW_INBOX_SID = ?
        ]]>
    </sql>
    <sql id="wi.inbox_search">
	<![CDATA[
            SELECT DISTINCT WM.WORKFLOW_ID AS workflowId, @WFNAME AS workflowName, WM.WORKFLOW_DESCRPTION AS workflowDescription, HT_STATUS.DESCRIPTION AS workFlowStatus, 
            WM.CREATED_BY as createdById, WM.CREATED_DATE as creationDate, WM.APPROVED_BY AS approvedById, WM.MODIFIED_DATE AS modifiedDate, 
            WM.WORKFLOW_MASTER_SID as workflowMasterSystemId, WM.PROJECTION_MASTER_SID as masterSid,WM.CONTRACT_STRUCTURE as contractStructure,WM.NO_OF_APPROVAL as noOfApprovals,WM.APPROVAL_LEVEL as approvalLevel, wm.APPROVED_DATE as approvedDate FROM WORKFLOW_MASTER WM 
            JOIN dbo.HELPER_TABLE HT_STATUS on HT_STATUS.HELPER_TABLE_SID = WM.WORKFLOW_STATUS_ID
        ]]>
    </sql>
    <sql id="gcm_wi.inbox_search">
	<![CDATA[
            SELECT DISTINCT TOP 1 WM.WORKFLOW_ID AS workflowId, @WFNAME AS workflowName, WM.WORKFLOW_DESCRPTION AS workflowDescription, HT_STATUS.DESCRIPTION AS workFlowStatus, 
            WM.CREATED_BY as createdById, WM.CREATED_DATE as creationDate, WM.APPROVED_BY AS approvedById, WM.MODIFIED_DATE AS modifiedDate, 
            WM.WORKFLOW_MASTER_SID as workflowMasterSystemId, WM.PROJECTION_MASTER_SID as masterSid,WM.CONTRACT_STRUCTURE as contractStructure,WM.NO_OF_APPROVAL as noOfApprovals,WM.APPROVAL_LEVEL as approvalLevel, wm.APPROVED_DATE as approvedDate FROM WORKFLOW_MASTER WM 
            JOIN dbo.HELPER_TABLE HT_STATUS on HT_STATUS.HELPER_TABLE_SID = WM.WORKFLOW_STATUS_ID
        ]]>
    </sql>
</custom-sql>